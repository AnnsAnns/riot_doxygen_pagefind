<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIOT OS: IO-Mapping and Shields</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="jquery.js"></script> -->
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<!-- <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> -->
<script src="/pagefind/pagefind-ui.js"></script>
<script>
  // Check whether the PagefindUI class is available
  if (typeof PagefindUI === 'undefined') {
    console.error('PagefindUI class is not available | Dev Build');
  } else {
    // // Remove the "searchstub" element and initialize the PagefindUI class
    // document.getElementById("#searchstub").remove();
    // Initialize the PagefindUI class with the element id "search"
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
  }
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="global.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <script>
    // Print the data within the NAVTREE variable from the navtreedata.js file
    var navtree = NAVTREE;
    console.log(navtree);
  </script>
<div class="flex flex-row gap-4 w-screen font-sans text-lg max-h-screen overscroll-contain justify-items-stretch bg-neutral-900">
  <!--Sidebar-->
  <div data-pagefind-ignore="all" class="w-1/3 max-w-md flex-auto h-screen bg-neutral-800 ring-2 ring-neutral-700 shadow-neutral-800 shadow-2xl rounded-xl p-3 ml-1 my-2 mr-3 flex flex-col justify-around">
    <div id="top" class="justify-self-center content-center items-center place-content-center">
      <img alt="Logo" src="riot-logo.svg"/>
      <div id="projectbrief">
        The friendly Operating System for the Internet of Things
      </div>
    </div>
    <div id="search" class="place-content-center" class="overflow-y-scroll max-h-64 bg-slate-400 ring-2 ring-white text-white" >
      <h1>Searchbar via Pagefind</h1>
      <!-- <div id="searchstub" class="flex items-center border border-gray-300 rounded-lg p-2 shadow-sm">
        <input type="text" placeholder="Search is only available in Production Build ..." class="flex-grow p-2 outline-none">
      </div> -->
    </div>
    <div id="navtree">
      <script>
        // The navtree variable is always a pair of two elements (key, value)
        // The key is the name we should display and the value is the link to the page
        // Generate the navtree from the navtreedata.js file and put it under the navtree div
        var navtree = NAVTREE[0][2];
        var navtreeHTML = "<h1>Navigation based on Doxygen</h1> <ul>";
        for (var i = 0; i < navtree.length; i++) {
          navtreeHTML += "<li><a href='" + navtree[i][1] + "'>" + navtree[i][0] + "</a></li>";
          if (i == 5) {
            navtreeHTML += '<li><h3 class="ring-2 ring-white"> Random Insert for Demonstration </h3></li>';
          }
        }
        navtreeHTML += "</ul>";
        document.getElementById("navtree").innerHTML = navtreeHTML;
      </script>
    </div>
    <ul>
      <li class="footer">
        Generated on Tue Sep 24 2024 11:16:26 by 
          <a href="http://www.doxygen.org/index.html">
            Doxygen
          </a> 
        1.12.0
      </li>
    </ul>
  </div>
  <!--Main Content-->
  <div class="hidden">
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('iomaps.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">IO-Mapping and Shields</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#iomaps-intro">Introduction</a>
  </li>
  <li class="level1">
    <a href="#iomaps-mapping">I/O Mappings</a>
    <ul>
      <li class="level2">
        <a href="#iomaps-mapping-gpio">Digital Pins</a>
      </li>
      <li class="level2">
        <a href="#iomaps-mapping-adc">Analog Pins</a>
      </li>
      <li class="level2">
        <a href="#iomaps-mapping-dac">DAC Pins</a>
      </li>
      <li class="level2">
        <a href="#iomaps-mapping-pwm">PWM Pins</a>
      </li>
      <li class="level2">
        <a href="#iomaps-mapping-uart">UART Device</a>
      </li>
      <li class="level2">
        <a href="#iomaps-mapping-i2c">I²C Buses</a>
      </li>
      <li class="level2">
        <a href="#iomaps-mapping-spi">SPI Buses</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#iomaps-shields">Mechanical and Electrical Compatibility</a>
  </li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_doc_2doxygen_2src_2io-mapping-and-shields"></a></p>
<h1><a class="anchor" id="iomaps-intro"></a>
Introduction</h1>
<p>Arduino has popularized the concept of adding an abstraction layer over the MCU GPIOs and ADC multiplexer as "Digital Pins" and "Analog Pins". For historic reasons as well as to express appreciation for the introduction of concept, we prefix features and macros that map board pins to MCU pins with <code>ARDUINO</code>.</p>
<dl class="section note"><dt>Note</dt><dd>This means, we also explicitly use the Arduino feature for boards that are neither official Arduino products nor compatible.</dd></dl>
<h1><a class="anchor" id="iomaps-mapping"></a>
I/O Mappings</h1>
<p>All I/O mappings are provided by the <code>arduino_iomap.h</code> header file. This is provided either by the board directly (e.g. in <code>&lt;RIOT git repo&gt;/board/&lt;board&gt;/include/arduino_iomap.h</code>) or by the board family (e.g. in <code>board/common/&lt;board family&gt;/include/arduino_iomap.h</code>).</p>
<p>To add support to new boards, start by copy-pasting the <code>arduino_iomap.h</code> from an existing board and adapt/extend the macros as needed. Finally, add the features to the <code>Makefile.features</code> and <code>KConfig</code> files of the board that indicate the presence of the added mappings.</p>
<h2><a class="anchor" id="iomaps-mapping-gpio"></a>
Digital Pins</h2>
<p>The feature <code>arduino_pins</code> is provided by boards that do have a mapping to digital pins. The GPIO for e.g. <code>D3</code> is provided as <code>ARDUINO_PIN_3</code>. The number of the highest digital pin is provided as <code>ARDUINO_PIN_LAST</code>. E.g. if <code>ARDUINO_PIN_LAST</code> is 42, digital pins <code>D0</code> to <code>D42</code> are typically provided.</p>
<dl class="section warning"><dt>Warning</dt><dd>Some boards do have "gaps" in the pin mapping. It could be that e.g. <code>ARDUINO_PIN_5</code> is defined, but <code>ARDUINO_PIN_4</code> is not.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Often aliases are provided for analog pins in digital mode. E.g. to use the pin <code>A3</code> as digital pin, <code>ARDUINO_PIN_A3</code> can be used to avoid looking up what digital number that pin has.</dd></dl>
<h2><a class="anchor" id="iomaps-mapping-adc"></a>
Analog Pins</h2>
<p>The feature <code>arduino_analog</code> is provided by boards that do have a mapping of ADC lines to analog pins. E.g. the ADC line corresponding to pin <code>A5</code> would be <code>ARDUINO_A5</code>. The number of the highest analog pin is provided as <code>ARDUINO_ANALOG_PIN_LAST</code>. The macro <code>ARDUINO_ANALOG_PIN_LAST</code> is defined if and only if a mapping is provided (so it can be used to test for this feature).</p>
<dl class="section warning"><dt>Warning</dt><dd>Some boards do have "gaps" in the analog pin mapping. It could be that e.g. <code>ARDUINO_A3</code> is defined, but <code>ARDUINO_A2</code> is not.</dd></dl>
<h2><a class="anchor" id="iomaps-mapping-dac"></a>
DAC Pins</h2>
<p>The feature <code>arduino_dac</code> is provided by boards that do have a mapping of DAC pins to DAC lines. E.g. the DAC line for the pin DAC1 would be <code>ARDUINO_DAC1</code>. The number of the highest DAC pin is provided as <code>ARDUINO_DAC_PIN_LAST</code>. The macro <code>ARDUINO_DAC_PIN_LAST</code> is defined if and only if a mapping is provided (so it can be used to test for this feature).</p>
<dl class="section warning"><dt>Warning</dt><dd>Some boards do have "gaps" in the analog pin mapping. It could be that e.g. <code>ARDUINO_DAC4</code> is defined, but <code>ARDUINO_DAC3</code> is not.</dd></dl>
<h2><a class="anchor" id="iomaps-mapping-pwm"></a>
PWM Pins</h2>
<p>The feature <code>arduino_pwm</code> is provided by boards that do have a mapping of digital pins to PWM settings. E.g. the PWM device connected to the digital pin <code>D11</code> would be <code>ARDUINO_PIN_11_PWM_DEV</code> and the channel would be <code>ARDUINO_PIN_11_PWM_CHAN</code>. A PWM frequency for all PWM pins is defined as <code>ARDUINO_PWM_FREQU</code>.</p>
<dl class="section warning"><dt>Warning</dt><dd>Typically only few digital pins support PWM. For pins without PWM output no <code>ARDUINO_PIN_&lt;NUM&gt;_PWM_DEV</code> macro and no <code>ARDUINO_PIN_&lt;NUM&gt;_PWM_DEV</code> is defined.</dd></dl>
<h2><a class="anchor" id="iomaps-mapping-uart"></a>
UART Device</h2>
<p>The feature <code>arduino_uart</code> is provided by boards that do provide an UART device mapping. For the official Arduino boards and compatible boards, the <code>ARDUINO_UART_D0D1</code> macro refers to the UART device that uses the digital pins <code>D0</code> and <code>D1</code>.</p>
<p>Please extend the table below to keep naming among boards of the same form factor consistent:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Form Factor   </th><th class="markdownTableHeadLeft">Macro Name   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Nano   </td><td class="markdownTableBodyLeft"><code>ARDUINO_UART_D0D1</code>   </td><td class="markdownTableBodyLeft">UART on D0 (RXD) and D1 (TXD)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Uno   </td><td class="markdownTableBodyLeft"><code>ARDUINO_UART_D0D1</code>   </td><td class="markdownTableBodyLeft">UART on D0 (RXD) and D1 (TXD)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Mega   </td><td class="markdownTableBodyLeft"><code>ARDUINO_UART_D0D1</code>   </td><td class="markdownTableBodyLeft">UART on D0 (RXD) and D1 (TXD)   </td></tr>
</table>
<h2><a class="anchor" id="iomaps-mapping-i2c"></a>
I²C Buses</h2>
<p>The feature <code>arduino_i2c</code> is provided by boards that do provide an I²C bus mapping.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Form Factor   </th><th class="markdownTableHeadLeft">Macro Name   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Nano   </td><td class="markdownTableBodyLeft"><code>ARDUINO_I2C_NANO</code>   </td><td class="markdownTableBodyLeft">D18 (SDA) / D19 (SCL)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Uno   </td><td class="markdownTableBodyLeft"><code>ARDUINO_I2C_UNO</code>   </td><td class="markdownTableBodyLeft">D18 (SDA) / D19 (SCL)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Mega   </td><td class="markdownTableBodyLeft"><code>ARDUINO_I2C_UNO</code>   </td><td class="markdownTableBodyLeft">D20 (SDA) / D21 (SCL)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Zero   </td><td class="markdownTableBodyLeft"><code>ARDUINO_I2C_UNO</code>   </td><td class="markdownTableBodyLeft">D20 (SDA) / D21 (SCL)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Due   </td><td class="markdownTableBodyLeft"><code>ARDUINO_I2C_UNO</code>   </td><td class="markdownTableBodyLeft">D70 (SDA) / D71 (SCL)   </td></tr>
</table>
<p>The <code>ARDUINO_I2C_UNO</code> refers to the I²C bus next to the AREF pin (the topmost pins on header on the top right) of an Arduino Uno compatible board, e.g. such as the Arduino Mega2560. Even though the Arduino UNO, the Arduino MEGA2560, the Arduino Zero and the Arduino Zero all having the I²C bus at the exact same mechanical positions, the digital pin number of the I²C bus next to the AREF differs between the versions.</p>
<h2><a class="anchor" id="iomaps-mapping-spi"></a>
SPI Buses</h2>
<p>The feature <code>arduino_spi</code> is provided by boards that do provide an SPI bus mapping.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Form Factor   </th><th class="markdownTableHeadLeft">Macro Name   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Nano   </td><td class="markdownTableBodyLeft"><code>ARDUINO_SPI_ISP</code>   </td><td class="markdownTableBodyLeft">The SPI on the ISP header    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Nano   </td><td class="markdownTableBodyLeft"><code>ARDUINO_SPI_D11D12D13</code>   </td><td class="markdownTableBodyLeft">D11 (MOSI) / D12 (MISO) / D13 (SCK)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Uno   </td><td class="markdownTableBodyLeft"><code>ARDUINO_SPI_ISP</code>   </td><td class="markdownTableBodyLeft">The SPI on the ISP header    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Uno   </td><td class="markdownTableBodyLeft"><code>ARDUINO_SPI_D11D12D13</code>   </td><td class="markdownTableBodyLeft">D11 (MOSI) / D12 (MISO) / D13 (SCK)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Mega   </td><td class="markdownTableBodyLeft"><code>ARDUINO_SPI_ISP</code>   </td><td class="markdownTableBodyLeft">The SPI on the ISP header    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Mega   </td><td class="markdownTableBodyLeft"><code>ARDUINO_SPI_D11D12D13</code>   </td><td class="markdownTableBodyLeft">D11 (MOSI) / D12 (MISO) / D13 (SCK)   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>The original AVR based Arduinos only have a single hard SPI bus which is only provided via the ISP header. Many modern Arduino compatible boards do not provide the ISP header and only have SPI on D11/D12/D13 provided.</dd></dl>
<h1><a class="anchor" id="iomaps-shields"></a>
Mechanical and Electrical Compatibility</h1>
<p>Modules implementing drivers for extension boards, a.k.a. shields, can express their mechanical and electrical requirements by depending on <code>arduino_shield_...</code> features. The following list of features currently exists:</p>
<p>| Feature Name | Compatibility Claim | | | <code>arduino_shield_nano</code> | Board has side headers compatible with the Arduino Nano | | <code>arduino_shield_uno</code> | Board has side headers compatible with the Arduino UNO | | <code>arduino_shield_mega</code> | Board has side headers compatible with the Arduino MEGA | | <code>arduino_shield_isp</code> | Board has an ISP header |</p>
<dl class="section note"><dt>Note</dt><dd>A board providing <code>arduino_shield_mega</code> <b>MUST</b> also provide <code>arduino_shield_uno</code>, as Arduino MEGA boards are backward compatible to shields for the Arduino UNO.</dd></dl>
<p>E.g. a module that implements the W5100 based Ethernet shield would depend on both <code>arduino_shield_uno</code> and <code>arduino_shield_isp</code> for electrical compatibility as well as on <code>arduino_spi</code> for SPI bus mapping and <code>arduino_pins</code> for the CS pin mapping. This module could reuse the existing <code>w5100</code> driver and just supply the correct <code><a class="el" href="structw5100__params__t.html" title="W5100 device descriptor.">w5100_params_t</a></code> using the I/O mappings. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

    </div>
  </body>
</html>
