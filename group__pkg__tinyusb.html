<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIOT OS: TinyUSB package</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="jquery.js"></script> -->
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<!-- <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> -->
<script src="/pagefind/pagefind-ui.js"></script>
<script>
  // Check whether the PagefindUI class is available
  if (typeof PagefindUI === 'undefined') {
    console.error('PagefindUI class is not available | Dev Build');
  } else {
    // // Remove the "searchstub" element and initialize the PagefindUI class
    // document.getElementById("#searchstub").remove();
    // Initialize the PagefindUI class with the element id "search"
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
  }
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="global.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <script>
    // Print the data within the NAVTREE variable from the navtreedata.js file
    var navtree = NAVTREE;
    console.log(navtree);
  </script>
<div class="flex flex-row gap-4 w-screen font-sans text-lg max-h-screen overscroll-contain justify-items-stretch bg-neutral-900">
  <!--Sidebar-->
  <div data-pagefind-ignore="all" class="w-1/3 max-w-md flex-auto h-screen bg-neutral-800 ring-2 ring-neutral-700 shadow-neutral-800 shadow-2xl rounded-xl p-3 ml-1 my-2 mr-3 flex flex-col justify-around">
    <div id="top" class="justify-self-center content-center items-center place-content-center">
      <img alt="Logo" src="riot-logo.svg"/>
      <div id="projectbrief">
        The friendly Operating System for the Internet of Things
      </div>
    </div>
    <div id="search" class="place-content-center" class="overflow-y-scroll max-h-64 bg-slate-400 ring-2 ring-white text-white" >
      <h1>Searchbar via Pagefind</h1>
      <!-- <div id="searchstub" class="flex items-center border border-gray-300 rounded-lg p-2 shadow-sm">
        <input type="text" placeholder="Search is only available in Production Build ..." class="flex-grow p-2 outline-none">
      </div> -->
    </div>
    <div id="navtree">
      <script>
        // The navtree variable is always a pair of two elements (key, value)
        // The key is the name we should display and the value is the link to the page
        // Generate the navtree from the navtreedata.js file and put it under the navtree div
        var navtree = NAVTREE[0][2];
        var navtreeHTML = "<h1>Navigation based on Doxygen</h1> <ul>";
        for (var i = 0; i < navtree.length; i++) {
          navtreeHTML += "<li><a href='" + navtree[i][1] + "'>" + navtree[i][0] + "</a></li>";
          if (i == 5) {
            navtreeHTML += '<li><h3 class="ring-2 ring-white"> Random Insert for Demonstration </h3></li>';
          }
        }
        navtreeHTML += "</ul>";
        document.getElementById("navtree").innerHTML = navtreeHTML;
      </script>
    </div>
    <ul>
      <li class="footer">
        Generated on Tue Sep 24 2024 11:16:27 by 
          <a href="http://www.doxygen.org/index.html">
            Doxygen
          </a> 
        1.12.0
      </li>
    </ul>
  </div>
  <!--Main Content-->
  <div class="hidden">
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__pkg__tinyusb.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#groups">Topics</a> &#124;
<a href="#files">Files</a>  </div>
  <div class="headertitle"><div class="title">TinyUSB package<div class="ingroups"><a class="el" href="group__pkg.html">Packages</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Provides the tinyUSB stack as package  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Provides the tinyUSB stack as package </p>
<dl class="section author"><dt>Author</dt><dd>Gunar Schorcht <a href="#" onclick="location.href='mai'+'lto:'+'gun'+'ar'+'@sc'+'ho'+'rch'+'t.'+'net'; return false;">gunar<span class="obfuscator">.nosp@m.</span>@sch<span class="obfuscator">.nosp@m.</span>orcht<span class="obfuscator">.nosp@m.</span>.net</a> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://github.com/hathach/tinyusb">https://github.com/hathach/tinyusb</a></dd></dl>
<h1><a class="anchor" id="pkg_tinyusb"></a>
TinyUSB</h1>
<p>tinyUSB is an open-source cross-platform USB Host/Device stack for embedded systems.</p>
<dl class="section note"><dt>Note</dt><dd>This package is distinct from (and incompatible with) the USB stack provided around USBUS in RIOT (see <a class="el" href="group__usb.html">USB</a>). They differ in the level of abstraction and in the set of supported devices.</dd></dl>
<h1><a class="anchor" id="autotoc_md1916"></a>
Usage</h1>
<p>Add the following entries to your application makefile:</p><ul>
<li>Enable tinyUSB package <div class="fragment"><div class="line">USEPKG += tinyusb</div>
</div><!-- fragment --></li>
<li>Select whether to use the tinyUSB device stack or the tinyUSB host stack or both: <div class="fragment"><div class="line">USEMODULE += tinyusb_device</div>
</div><!-- fragment --></li>
<li>Select the device/host classes to be used, for example: <div class="fragment"><div class="line">USEMODULE += tinyusb_class_cdc tinyusb_class_msc</div>
</div><!-- fragment --></li>
</ul>
<p>Either add <code><a class="el" href="tinyusb_8h.html#a0c04305ad9d156824dd92035c55102ba" title="Initialize the tinyUSB stack including used peripherals and start the tinyUSB thread.">tinyusb_setup()</a></code> to your main function to explicitly initialize the tinyUSB stack including the used peripherals and start the tinyUSB thread, or use the <code>auto_init</code> module (<b>default</b>).</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">    <span class="comment">// If auto-initialization is not used (module `auto_init`),</span></div>
<div class="line">    <span class="comment">// initialize the tinyUSB stack including used peripherals and</span></div>
<div class="line">    <span class="comment">// start the tinyUSB thread. Auto-initialization is used by default.</span></div>
<div class="line">    <a class="code hl_function" href="tinyusb_8h.html#a0c04305ad9d156824dd92035c55102ba">tinyusb_setup</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        ...</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="atinyusb_8h_html_a0c04305ad9d156824dd92035c55102ba"><div class="ttname"><a href="tinyusb_8h.html#a0c04305ad9d156824dd92035c55102ba">tinyusb_setup</a></div><div class="ttdeci">int tinyusb_setup(void)</div><div class="ttdoc">Initialize the tinyUSB stack including used peripherals and start the tinyUSB thread.</div></div>
</div><!-- fragment --><p>If it is necessary to override the default configuration defined in <code><a class="el" href="tusb__config_8h.html" title="TinyUSB default configurations.">tusb_config.h</a></code>, create a file <code>tinyusb_app_config.h</code> in your application directory and override the configuration to be changed. </p><div class="fragment"><div class="line"><span class="preprocessor">#define CONFIG_TUSBD_CDC_NUMOF   2</span></div>
</div><!-- fragment --><p>By default, the number of <code>CONFIG_TUSBD_*_NUMOF</code> device class and <code>CONFIG_TUSBH_*_NUMOF</code> host class interfaces are defined to 1 if the corresponding <code>tinyusb_class_*</code> and <code>tinyusb_device</code>/<code>tinyusb_host</code> module are enabled, and 0 otherwise. That is, there is one interface of each class.</p>
<p>For example, if the <code>tinyusb_device</code> and <code>tinyusb_class_cdc</code> modules are enabled, <code>CONFIG_TUSBD_CDC_NUMOF</code> is defined to 1 by default. The number of all other <code>CONFIG_TUSBD_*_NUMOF</code> device class interfaces are 0.</p>
<p>If you add the <code>tinyusb_app_config.h</code> file in your application directory to override the default configuration, add the application path to the include paths at the end of your application's Makefile. This is necessary so that the tinyUSB stack uses the file <code>tinyusb_app_config.h</code> from your application directory and thus the file <code><a class="el" href="tusb__config_8h.html" title="TinyUSB default configurations.">tusb_config.h</a></code> from the tinyUSB package. </p><div class="fragment"><div class="line">USEPKG += tinyusb</div>
<div class="line">USEMODULE += tinyusb_class_cdc</div>
<div class="line">USEMODULE += tinyusb_class_msc</div>
<div class="line">USEMODULE += tinyusb_device</div>
<div class="line"> </div>
<div class="line">include $(RIOTBASE)/Makefile.include</div>
<div class="line"> </div>
<div class="line">INCLUDES += -I$(APPDIR)</div>
</div><!-- fragment --><p>Implement the callbacks of the enabled classes.</p>
<p>For most common device classes and their configuration, the tinyUSB package automatically generates the required descriptors and descriptor callbacks for any combination of</p><ul>
<li>up to two interfaces of the class CDC ACM,</li>
<li>up to two interfaces of the Generic In/Out HID class,</li>
<li>up to one DFU interface</li>
<li>up to one MSC device interface and,</li>
<li>up to one Net device interface with CDC ECM, CDC NCM and RNDIS protocol, and</li>
<li>up to one interface of the Vendor device class.</li>
</ul>
<p>Any other combination, either a different number of these device class interfaces or the use of a different device class interface, requires the implementation of custom descriptors and the callbacks.</p>
<p>All symbols of the generated descriptors and their callback functions are defined as weak symbols so that the application can override parts of the descriptors or the callback functions that handle them. For example, the array <code>tusb_desc_hid_0_report</code>, which defines the HID report descriptor for HID device 0, making the device a generic in/out HID device</p>
<div class="fragment"><div class="line">__attribute__((weak))</div>
<div class="line">uint8_t <span class="keyword">const</span> tusb_desc_hid_0_report[] =</div>
<div class="line">{</div>
<div class="line">    TUD_HID_REPORT_DESC_GENERIC_INOUT(CONFIG_TUSBD_HID_EP_SIZE),</div>
<div class="line">};</div>
</div><!-- fragment --><p>could be overridden by the application with</p>
<div class="fragment"><div class="line">uint8_t <span class="keyword">const</span> tusb_desc_hid_0_report[] =</div>
<div class="line">{</div>
<div class="line">    TUD_HID_REPORT_DESC_KEYBOARD(HID_REPORT_ID(REPORT_ID_KEYBOARD)),</div>
<div class="line">    TUD_HID_REPORT_DESC_MOUSE(HID_REPORT_ID(REPORT_ID_MOUSE)),</div>
<div class="line">};</div>
</div><!-- fragment --><p>to make the device to be a composite keyboard/mouse device.</p>
<p>Please refer <code>$RIOTBASE/tests/pkg/tinyusb_cdc_msc</code> and the <a href="https://docs.tinyusb.org/en/latest/reference/getting_started.html">tinyUSB documentation</a> for details. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Topics</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pkg__tinyusb__netdev.html">TinyUSB netdev driver</a></td></tr>
<tr class="memdesc:group__pkg__tinyusb__netdev"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB netdev driver for CDC ECM, CDC NCM and RNDIS protocol <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pkg__tinyusb__dfu.html">riotboot tinyUSB DFU</a></td></tr>
<tr class="memdesc:group__pkg__tinyusb__dfu"><td class="mdescLeft">&#160;</td><td class="mdescRight"><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cpu_2stm32_2include_2tinyusb__hw__defaults_8h.html">tinyusb_hw_defaults.h</a></td></tr>
<tr class="memdesc:cpu_2stm32_2include_2tinyusb__hw__defaults_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">STM32 specific default configurations for tinyUSB. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinyusb_8h.html">tinyusb.h</a></td></tr>
<tr class="memdesc:tinyusb_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB API. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinyusb__descriptors_8h.html">tinyusb_descriptors.h</a></td></tr>
<tr class="memdesc:tinyusb__descriptors_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB commonn descriptor implementation. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tusb__config_8h.html">tusb_config.h</a></td></tr>
<tr class="memdesc:tusb__config_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB default configurations. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tusb__os__custom_8h.html">tusb_os_custom.h</a></td></tr>
<tr class="memdesc:tusb__os__custom_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB OS Abstraction Layer for RIOT. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinyusb__hw_8h.html">tinyusb_hw.h</a></td></tr>
<tr class="memdesc:tinyusb__hw_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB hardware driver API. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pkg_2tinyusb_2hw_2include_2tinyusb__hw__defaults_8h.html">tinyusb_hw_defaults.h</a></td></tr>
<tr class="memdesc:pkg_2tinyusb_2hw_2include_2tinyusb__hw__defaults_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hardware specific default configurations for tinyUSB. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->

    </div>
  </body>
</html>
