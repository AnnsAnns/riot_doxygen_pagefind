<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIOT OS: Raspberry Pi Pico W</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="jquery.js"></script> -->
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<!-- <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> -->
<script src="/pagefind/pagefind-ui.js"></script>
<script>
  // Check whether the PagefindUI class is available
  if (typeof PagefindUI === 'undefined') {
    console.error('PagefindUI class is not available | Dev Build');
  } else {
    // // Remove the "searchstub" element and initialize the PagefindUI class
    // document.getElementById("#searchstub").remove();
    // Initialize the PagefindUI class with the element id "search"
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
  }
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="global.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <script>
    // Print the data within the NAVTREE variable from the navtreedata.js file
    var navtree = NAVTREE;
    console.log(navtree);
  </script>
<div class="flex flex-row gap-4 w-screen font-sans text-lg max-h-screen overscroll-contain justify-items-stretch bg-neutral-900">
  <!--Sidebar-->
  <div data-pagefind-ignore="all" class="w-1/3 max-w-md flex-auto h-screen bg-neutral-800 ring-2 ring-neutral-700 shadow-neutral-800 shadow-2xl rounded-xl p-3 ml-1 my-2 mr-3 flex flex-col justify-around">
    <div id="top" class="justify-self-center content-center items-center place-content-center">
      <img alt="Logo" src="riot-logo.svg"/>
      <div id="projectbrief">
        The friendly Operating System for the Internet of Things
      </div>
    </div>
    <div id="search" class="place-content-center" class="overflow-y-scroll max-h-64 bg-slate-400 ring-2 ring-white text-white" >
      <h1>Searchbar via Pagefind</h1>
      <!-- <div id="searchstub" class="flex items-center border border-gray-300 rounded-lg p-2 shadow-sm">
        <input type="text" placeholder="Search is only available in Production Build ..." class="flex-grow p-2 outline-none">
      </div> -->
    </div>
    <div id="navtree">
      <script>
        // The navtree variable is always a pair of two elements (key, value)
        // The key is the name we should display and the value is the link to the page
        // Generate the navtree from the navtreedata.js file and put it under the navtree div
        var navtree = NAVTREE[0][2];
        var navtreeHTML = "<h1>Navigation based on Doxygen</h1> <ul>";
        for (var i = 0; i < navtree.length; i++) {
          navtreeHTML += "<li><a href='" + navtree[i][1] + "'>" + navtree[i][0] + "</a></li>";
          if (i == 5) {
            navtreeHTML += '<li><h3 class="ring-2 ring-white"> Random Insert for Demonstration </h3></li>';
          }
        }
        navtreeHTML += "</ul>";
        document.getElementById("navtree").innerHTML = navtreeHTML;
      </script>
    </div>
    <ul>
      <li class="footer">
        Generated on Tue Sep 24 2024 11:16:27 by 
          <a href="http://www.doxygen.org/index.html">
            Doxygen
          </a> 
        1.12.0
      </li>
    </ul>
  </div>
  <!--Main Content-->
  <div class="hidden">
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__boards__rpi__pico__w.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">Raspberry Pi Pico W<div class="ingroups"><a class="el" href="group__boards.html">Boards</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Support for the RP2040 based Raspberry Pi Pico W board  
</p>
<p>Support for the RP2040 based Raspberry Pi Pico W board </p>
<h2><a class="anchor" id="autotoc_md1046"></a>
Overview</h2>
<p>The Raspberry Pi Pico W and Pico WH (with headers) is a board with RP2040 MCU, a custom dual core ARM Cortex-M0+ MCU with relatively high CPU clock, plenty of RAM, some unique peripheral (the Programmable IO) and the Infineon CYW43439 wireless chip.</p>
<h2><a class="anchor" id="autotoc_md1047"></a>
Hardware</h2>
<p><img src="https://www.raspberrypi.com/app/uploads/2022/06/Copy-of-PICO-W-HERO-800x533.jpg" alt="Raspberry Pi Pico W" class="inline"/></p>
<p>Raspberry Pi Pico W is provided in two versions - without and with headers, the second one is called Pico WH. Detailed photos can be found at <a href="https://www.raspberrypi.com/documentation/microcontrollers/images/four_picos.jpg">Raspberry Pi Pico family</a>.</p>
<h3><a class="anchor" id="autotoc_md1048"></a>
MCU</h3>
<p>The Programmable IO (PIO) peripheral and the SSI/QSPI peripheral that supports execution from flash (XIP) are the most distinguishing features of the MCU. The latter is especially important, since the RP2040 contains no internal flash.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">MCU   </th><th class="markdownTableHeadLeft">RP2040    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Family   </td><td class="markdownTableBodyLeft">(2x) ARM Cortex-M0+    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vendor   </td><td class="markdownTableBodyLeft">Raspberry Pi    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">RAM   </td><td class="markdownTableBodyLeft">264 KiB    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Flash   </td><td class="markdownTableBodyLeft">2 MiB (up to 16 MiB)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Frequency   </td><td class="markdownTableBodyLeft">up to 133 MHz    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">FPU   </td><td class="markdownTableBodyLeft">no    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">PIOs   </td><td class="markdownTableBodyLeft">8    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Timers   </td><td class="markdownTableBodyLeft">1 x 64-bit    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ADCs   </td><td class="markdownTableBodyLeft">1x 12-bit (4 channels + temperature sensor)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">UARTs   </td><td class="markdownTableBodyLeft">2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SPIs   </td><td class="markdownTableBodyLeft">2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">I2Cs   </td><td class="markdownTableBodyLeft">2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">RTCs   </td><td class="markdownTableBodyLeft">1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">USBs   </td><td class="markdownTableBodyLeft">1 (USB 2.0)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Watchdog   </td><td class="markdownTableBodyLeft">1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SSI/QSPI   </td><td class="markdownTableBodyLeft">1 (connected to flash, with XIP support)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">WiFi   </td><td class="markdownTableBodyLeft">via wireless chip (Infineon CYW43439) (*)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Bluetooth   </td><td class="markdownTableBodyLeft">via wireless chip (Infineon CYW43439) (*)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Vcc   </td><td class="markdownTableBodyLeft">1.62V - 3.63V    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Datasheet   </td><td class="markdownTableBodyLeft"><a href="https://datasheets.raspberrypi.com/picow/pico-w-datasheet.pdf">Datasheet</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Wireless chip   </td><td class="markdownTableBodyLeft"><a href="https://www.infineon.com/dgdl/Infineon-CYW43439-DataSheet-v03_00-EN.pdf?fileId=8ac78c8c8386267f0183c320336c029f">Infineon CYW43439 Datasheet</a>   </td></tr>
</table>
<p>(*) Currently not implemented in the RIOT OS.</p>
<h3><a class="anchor" id="autotoc_md1049"></a>
User Interface</h3>
<p>1 button (also used for boot selection) and 1 LED:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Device   </th><th class="markdownTableHeadLeft">PIN    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">LED0   </td><td class="markdownTableBodyLeft">WL_GPIO0 (*)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SW0   </td><td class="markdownTableBodyLeft">QSPI_SS_N (**)   </td></tr>
</table>
<p>(*) In the Pico W LED0 is directly connected to the Infineon CYW43439 module, and cannot be directly controlled by MCU.</p>
<p>(**) Since the switch is connected to the chip-select pin of the QSPI interface the flash chip RIOT is running from via XIP, the switch is difficult to read out from software. This is currently not supported.</p>
<h3><a class="anchor" id="autotoc_md1050"></a>
Pinout</h3>
<p><img src="https://www.raspberrypi.com/documentation/microcontrollers/images/picow-pinout.svg" alt="Pinout Diagram of RPi Pico W" style="pointer-events: none;" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md1051"></a>
Flashing the Board</h2>
<h3><a class="anchor" id="autotoc_md1052"></a>
Flashing the Board Using the Bootloader</h3>
<p>Connect the device to your Micro-USB cable while the button (labeled <code>BOOTSEL</code> on the silkscreen of the PCB) is pressed to enter the bootloader. The pico will present itself as a storage medium to the system, to which a UF2 file can be copied perform the flashing of the device. This can be automated by running:</p>
<div class="fragment"><div class="line">make BOARD=rpi-pico-w flash</div>
</div><!-- fragment --><p>This is default flashing option using elf2uf2 PROGRAMMER. If the storage is not automatically mounted to <code>/media/&lt;USER_NAME&gt;/RPI-RP2</code>, you can overwrite the path by exporting the shell environment variable <code>ELF2UF2_MOUNT_PATH</code>.</p>
<h3><a class="anchor" id="autotoc_md1053"></a>
Flashing the Board Using OpenOCD</h3>
<p>Currently (June 2021), only two methods for debugging via OpenOCD are supported:</p>
<ol type="1">
<li>Using a bit-banging low-level adapter, e.g. via the GPIOs of a Raspberry Pi 4B</li>
<li>Using a virtual CMSIS-DAP adapter provided by the second CPU core via <a href="https://github.com/majbthrd/pico-debug">https://github.com/majbthrd/pico-debug</a></li>
</ol>
<p>Option 2 requires no additional hardware however, you need to first "flash" the gimme-cache variant of <a href="https://github.com/majbthrd/pico-debug">pico-debug</a> into RAM using the UF2 bootloader. For this, plug in the USB cable while holding down the BOOTSEL button of the Pico and copy the <code>pico-debug-gimmecache.uf2</code> from the <a href="https://github.com/majbthrd/pico-debug/releases">latest pico-debug release</a> into the virtual FAT formatted drive the bootloader provides. Once this drive is unmounted again, this will result in the Raspberry Pi Pico showing up as CMSIS-DAP debugger. Afterwards run:</p>
<div class="fragment"><div class="line">make BOARD=rpi-pico-w PROGRAMMER=openocd flash</div>
</div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>The <code>rpi-pico-w</code> virtual debugger is not persistent and needs to be "flashed" into RAM again after each cold boot.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>As of July 2021, the latest stable release of OpenOCD does not yet support the RP2040 MCU. Instead, compile the current <code>master</code> branch from the upstream OpenOCD source. The OpenOCD fork of the Raspberry Pi foundation is incompatible with OpenOCD configuration provided, so please stick with upstream OpenOCD.</dd></dl>
<h3><a class="anchor" id="autotoc_md1054"></a>
Flashing the Board Using J-Link</h3>
<p>Connect the Board to an Segger J-Link debugger, e.g. the EDU mini debugger is relatively affordable, but limited to educational purposes. Afterwards run:</p>
<div class="fragment"><div class="line">make BOARD=rpi-pico-w PROGRAMMER=jlink flash</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1055"></a>
Accessing RIOT shell</h2>
<p>This board's default access to RIOT shell is via UART (UART0 TX - pin 1, UART0 RX - pin 2).</p>
<p>The default baud rate is 115 200.</p>
<p>The simplest way to connect to the shell is the execution of the command:</p>
<div class="fragment"><div class="line">make BOARD=rpi-pico-w term</div>
</div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>Raspberry Pi Pico board is not 5V tolerant. Use voltage divider or logic level shifter when connecting to 5V UART.</dd></dl>
<h2><a class="anchor" id="autotoc_md1056"></a>
On-Chip Debugging</h2>
<p>There are currently (June 2021) few hardware options for debugging the Raspberry Pi Pico:</p>
<ol type="1">
<li>Via J-Link using one of Seggers debuggers</li>
<li>Via OpenOCD using a low-level bit-banging debugger (e.g. a Raspberry Pi 4B with the GPIOs connected to the Raspberry Pi Pico via jump wires)</li>
<li>Via a recently updated <a href="https://github.com/blacksphere/blackmagic">Black Magic Probe</a></li>
</ol>
<p>In addition, a software-only option is possible using <a href="https://github.com/majbthrd/pico-debug">pico-debug</a>. The default linker script reserved 16 KiB of RAM for this debugger, hence just "flash" the "gimme-cache" flavor into RAM using the UF2 bootloader. Once this is done, debugging is as simple as running:</p>
<div class="fragment"><div class="line">make BOARD=rpi-pico-w debug</div>
</div><!-- fragment --><p>Beware:*** The <code>rpi-pico-w</code> virtual debugger is not persistent and needs to be "flashed" into RAM again after each cold boot. The initialization code of RIOT now seems to play well with the debugger, so it remains persistent on soft reboots. If you face issues with losing connection to the debugger on reboot, try <code>monitor reset init</code> in GDB to soft-reboot instead.</p>
<h2><a class="anchor" id="autotoc_md1057"></a>
Known Issues / Problems</h2>
<h3><a class="anchor" id="autotoc_md1058"></a>
Early state Implementation</h3>
<p>Currently no support for the following peripherals is implemented:</p>
<ul>
<li>Timers</li>
<li>ADC</li>
<li>SPI</li>
<li>I2C</li>
<li>USB</li>
<li>PIO</li>
<li>RTC</li>
<li>Watchdog</li>
<li>SMP support (multi CPU support is not implemented in RIOT)</li>
<li>Infineon CYW 43439 wireless chip </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->

    </div>
  </body>
</html>
