<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIOT OS: Arduino</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="jquery.js"></script> -->
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<!-- <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> -->
<script src="/pagefind/pagefind-ui.js"></script>
<script>
  // Check whether the PagefindUI class is available
  if (typeof PagefindUI === 'undefined') {
    console.error('PagefindUI class is not available | Dev Build');
  } else {
    // // Remove the "searchstub" element and initialize the PagefindUI class
    // document.getElementById("#searchstub").remove();
    // Initialize the PagefindUI class with the element id "search"
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
  }
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="global.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <script>
    // Print the data within the NAVTREE variable from the navtreedata.js file
    var navtree = NAVTREE;
    console.log(navtree);
  </script>
<div class="flex flex-row gap-4 w-screen font-sans text-lg max-h-screen overscroll-contain justify-items-stretch bg-neutral-900">
  <!--Sidebar-->
  <div data-pagefind-ignore="all" class="w-1/3 max-w-md flex-auto h-screen bg-neutral-800 ring-2 ring-neutral-700 shadow-neutral-800 shadow-2xl rounded-xl p-3 ml-1 my-2 mr-3 flex flex-col justify-around">
    <div id="top" class="justify-self-center content-center items-center place-content-center">
      <img alt="Logo" src="riot-logo.svg"/>
      <div id="projectbrief">
        The friendly Operating System for the Internet of Things
      </div>
    </div>
    <div id="search" class="place-content-center" class="overflow-y-scroll max-h-64 bg-slate-400 ring-2 ring-white text-white" >
      <h1>Searchbar via Pagefind</h1>
      <!-- <div id="searchstub" class="flex items-center border border-gray-300 rounded-lg p-2 shadow-sm">
        <input type="text" placeholder="Search is only available in Production Build ..." class="flex-grow p-2 outline-none">
      </div> -->
    </div>
    <div id="navtree">
      <script>
        // The navtree variable is always a pair of two elements (key, value)
        // The key is the name we should display and the value is the link to the page
        // Generate the navtree from the navtreedata.js file and put it under the navtree div
        var navtree = NAVTREE[0][2];
        var navtreeHTML = "<h1>Navigation based on Doxygen</h1> <ul>";
        for (var i = 0; i < navtree.length; i++) {
          navtreeHTML += "<li><a href='" + navtree[i][1] + "'>" + navtree[i][0] + "</a></li>";
          if (i == 5) {
            navtreeHTML += '<li><h3 class="ring-2 ring-white"> Random Insert for Demonstration </h3></li>';
          }
        }
        navtreeHTML += "</ul>";
        document.getElementById("navtree").innerHTML = navtreeHTML;
      </script>
    </div>
    <ul>
      <li class="footer">
        Generated on Tue Sep 24 2024 11:16:26 by 
          <a href="http://www.doxygen.org/index.html">
            Doxygen
          </a> 
        1.12.0
      </li>
    </ul>
  </div>
  <!--Main Content-->
  <div class="hidden">
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__sys__arduino.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#groups">Topics</a> &#124;
<a href="#files">Files</a>  </div>
  <div class="headertitle"><div class="title">Arduino<div class="ingroups"><a class="el" href="group__sys.html">System</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Arduino in RIOT  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Arduino in RIOT </p>
<h1><a class="anchor" id="sec_about"></a>
About</h1>
<p>This module enables users to run unmodified Arduino sketches in RIOT. For this we aim at supporting the full Arduino API.</p>
<p>The support of the Arduino API in RIOT is useful for multiple reasons:</p><ul>
<li>starting point for beginners</li>
<li>run your existing sketches on any non-Arduino hardware supported by RIOT</li>
<li>makes it easy to move from Arduino to RIOT</li>
<li>use Arduino device drivers in RIOT</li>
<li>is fun to implement :-)</li>
</ul>
<p>Refer to <a class="el" href="group__sys__arduino__api.html">Arduino API</a> for the actual API documentation</p>
<h1><a class="anchor" id="sec_usage"></a>
General usage</h1>
<p>To run your Arduino sketch in RIOT, just follow these steps:</p>
<ol type="1">
<li>create an empty application</li>
<li>add the <code>arduino</code> module to your application, your <code>Makefile</code> should now look something like this: <div class="fragment"><div class="line">APPLICATION = YOUR_APP_NAME</div>
<div class="line">BOARD ?= YOUR_TARGET_PLATFORM</div>
<div class="line">RIOTBASE ?= PATH_TO_RIOT_ROOT</div>
<div class="line"> </div>
<div class="line">USEMODULE += arduino</div>
<div class="line"> </div>
<div class="line">include $(RIOTBASE)/Makefile.include</div>
</div><!-- fragment --></li>
<li>copy your Arduino sktech(es) into your application folder. Currently they must have the file ending <code>*.sketch</code> to be processed.</li>
<li>build, flash, and run your application the usual RIOT-way: simply call <code>make all</code>, <code>make flash</code>, <code>make term</code>, etc.</li>
</ol>
<p>That's all. As bonus you can of course use any existing RIOT code inside your Arduino sketches - you simply have to add the includes to your sketch and the corresponding modules to your <code>Makefile</code>.</p>
<dl class="section note"><dt>Note</dt><dd>So far, all Arduino sketches MUST have the file ending <code>*.sketch</code> to be recognized by RIOT's build system</dd></dl>
<h1><a class="anchor" id="sec_concept"></a>
Concept</h1>
<p>For enabling RIOT to run Arduino sketches, we extended the build system to handle <code>*.sketch</code> files and we implemented the Arduino API using RIOT's native functions.</p>
<h2><a class="anchor" id="sec_concept_build"></a>
Extension of the build system</h2>
<p>Building Arduino sketches in RIOT is done in a three step process.</p>
<p>First, the make system defines a generated <code>arduino_sketches</code> module placed into <code>$(BINDIR)</code> <a href="https://github.com/RIOT-OS/RIOT/tree/master/sys/arduino/sketches.inc.mk">Arduino sketches makefile</a>, which is included from the <a href="https://github.com/RIOT-OS/RIOT/tree/master/sys/arduino/Makefile.include">Makefile.include</a> of the RIOT Arduino module. The generated module is added to used modules and build directories.</p>
<p>Second, as prerequisites for the <code>link</code> target, the make system will create the module into <code>$(BINDIR)/arduino_sketches</code> with an <code>arduino_sketches.cpp</code> source file. Into this file, it copies some Arduino glue code ( <a href="https://github.com/RIOT-OS/RIOT/blob/master/sys/arduino/pre.snip">pre.snip</a> and <a href="https://github.com/RIOT-OS/RIOT/blob/master/sys/arduino/post.snip">post.snip</a>) together with the contents of all <code>*.sketch</code> files contained in the application folder.</p>
<p>Third, the RIOT make system is called as usual, building the generated library with the Arduino code and including it in the final firmware.</p>
<h2><a class="anchor" id="sec_conecpt_api"></a>
Implementation of the Arduino API</h2>
<p>For supporting the Arduino API, we have created our own function and class definitions, using the exact same signatures as in the original Arduino header files. These headers are then implemented using standard RIOT APIs, e.g. the peripheral drivers, <code>xtimer</code>, etc.</p>
<h1><a class="anchor" id="sec_boardsupport"></a>
Add Arduino support to a board</h1>
<dl class="section note"><dt>Note</dt><dd>As prerequisite, the board must have support for C++. Support for the standard C++ lib (feature <code>libstdcpp</code>) is not required.</dd></dl>
<p>As a minimum requirement, the features <code>arduino_pins</code> is a hard dependency. See <a class="el" href="iomaps.html#iomaps-mapping-gpio">Digital Pins</a> what a board needs to provide this.</p>
<p>Additional mappings for analog pins (see <a class="el" href="iomaps.html#iomaps-mapping-adc">Analog Pins</a>) and PWM pins (see <a class="el" href="iomaps.html#iomaps-mapping-pwm">PWM Pins</a>) is required to be able to use <code><a class="el" href="group__sys__arduino__api.html#ga6a005b7bdfeeca9d1d61b38929f34c58" title="Read the current value of the given analog pin.">analogRead()</a></code> and <code><a class="el" href="group__sys__arduino__api.html#ga86bb4d3e9f1bdb233cf01d835adcede0" title="Write an analog value to a pin.">analogWrite()</a></code>.</p>
<p>See also <a class="el" href="iomaps.html">IO-Mapping and Shields</a> on how a board can provide more I/O mappings and even declare electrical and mechanical compatibility with common Arduino form factors.</p>
<h1><a class="anchor" id="sec_todo"></a>
Open issues</h1>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000018">Todo</a></b></dt><dd><p class="startdd">Make it possible to bootstrap Arduino code manually from any RIOT application. Include a pseudomule as e.g. arduino_base, which does not implement a main function calling <code>setup()</code> and <code>loop()</code>, so these functions have to be called manually from a RIOT application. </p>
<p class="interdd">Implement analog outputs (PWM mapping) </p>
<p class="interdd">Implement analog inputs (ADC mapping) </p>
<p class="interdd">Add means to include various Arduino Libraries (maybe as pkg?) </p>
<p class="interdd">Implement anything else that is missing... </p>
<p class="enddd">Adapt Arduino build script, so sketches do not have to have the file ending <code>*.sketch</code> anymore </p>
</dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Topics</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__arduino__api.html">Arduino API</a></td></tr>
<tr class="memdesc:group__sys__arduino__api"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the Arduino API in RIOT <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Arduino_8h.html">Arduino.h</a></td></tr>
<tr class="memdesc:Arduino_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper to keep source code compatibility for <a class="el" href="Arduino_8h.html" title="Wrapper to keep source code compatibility for Arduino.h.">Arduino.h</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arduino__board_8h.html">arduino_board.h</a></td></tr>
<tr class="memdesc:arduino__board_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration of the Arduino API for Arduino Atmega boards. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arduino__board__analog_8h.html">arduino_board_analog.h</a></td></tr>
<tr class="memdesc:arduino__board__analog_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino analog pin map. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arduino__board__pins_8h.html">arduino_board_pins.h</a></td></tr>
<tr class="memdesc:arduino__board__pins_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino digital pin map. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arduino__board__pwm_8h.html">arduino_board_pwm.h</a></td></tr>
<tr class="memdesc:arduino__board__pwm_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mapping of Arduino digital pin numbers to PWM settings. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SPI_8h.html">SPI.h</a></td></tr>
<tr class="memdesc:SPI_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper to access the definition of the Arduino 'SPI' interface. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Wire_8h.html">Wire.h</a></td></tr>
<tr class="memdesc:Wire_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper to keep source code compatibility for <a class="el" href="Wire_8h.html" title="Wrapper to keep source code compatibility for Wire.h.">Wire.h</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->

    </div>
  </body>
</html>
