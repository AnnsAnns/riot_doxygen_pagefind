<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIOT OS: TCP sock API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="jquery.js"></script> -->
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<!-- <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> -->
<script src="/pagefind/pagefind-ui.js"></script>
<script>
  // Check whether the PagefindUI class is available
  if (typeof PagefindUI === 'undefined') {
    console.error('PagefindUI class is not available | Dev Build');
  } else {
    // // Remove the "searchstub" element and initialize the PagefindUI class
    // document.getElementById("#searchstub").remove();
    // Initialize the PagefindUI class with the element id "search"
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
  }
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="global.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <script>
    // Print the data within the NAVTREE variable from the navtreedata.js file
    var navtree = NAVTREE;
    console.log(navtree);
  </script>
<div class="flex flex-row gap-4 w-screen font-sans text-lg max-h-screen overscroll-contain justify-items-stretch bg-neutral-900">
  <!--Sidebar-->
  <div data-pagefind-ignore="all" class="w-1/3 max-w-md flex-auto h-screen bg-neutral-800 ring-2 ring-neutral-700 shadow-neutral-800 shadow-2xl rounded-xl p-3 ml-1 my-2 mr-3 flex flex-col justify-around">
    <div id="top" class="justify-self-center content-center items-center place-content-center">
      <img alt="Logo" src="riot-logo.svg"/>
      <div id="projectbrief">
        The friendly Operating System for the Internet of Things
      </div>
    </div>
    <div id="search" class="place-content-center" class="overflow-y-scroll max-h-64 bg-slate-400 ring-2 ring-white text-white" >
      <h1>Searchbar via Pagefind</h1>
      <!-- <div id="searchstub" class="flex items-center border border-gray-300 rounded-lg p-2 shadow-sm">
        <input type="text" placeholder="Search is only available in Production Build ..." class="flex-grow p-2 outline-none">
      </div> -->
    </div>
    <div id="navtree">
      <script>
        // The navtree variable is always a pair of two elements (key, value)
        // The key is the name we should display and the value is the link to the page
        // Generate the navtree from the navtreedata.js file and put it under the navtree div
        var navtree = NAVTREE[0][2];
        var navtreeHTML = "<h1>Navigation based on Doxygen</h1> <ul>";
        for (var i = 0; i < navtree.length; i++) {
          navtreeHTML += "<li><a href='" + navtree[i][1] + "'>" + navtree[i][0] + "</a></li>";
          if (i == 5) {
            navtreeHTML += '<li><h3 class="ring-2 ring-white"> Random Insert for Demonstration </h3></li>';
          }
        }
        navtreeHTML += "</ul>";
        document.getElementById("navtree").innerHTML = navtreeHTML;
      </script>
    </div>
    <ul>
      <li class="footer">
        Generated on Tue Sep 24 2024 11:16:27 by 
          <a href="http://www.doxygen.org/index.html">
            Doxygen
          </a> 
        1.12.0
      </li>
    </ul>
  </div>
  <!--Main Content-->
  <div class="hidden">
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__net__sock__tcp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">TCP sock API<div class="ingroups"><a class="el" href="group__net.html">Networking</a> &raquo; <a class="el" href="group__net__sock.html">Sock API</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Sock submodule for TCP  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Sock submodule for TCP </p>
<h2><a class="anchor" id="autotoc_md2085"></a>
How To Use</h2>
<p>First you need to <a class="el" href="creating-an-application.html#including-modules">include</a> a module that implements this API in your application's Makefile. For example the implementation for <a class="el" href="group__net__gnrc.html">GNRC</a> is called <code>gnrc_sock_tcp</code>.</p>
<h3><a class="anchor" id="autotoc_md2086"></a>
A Simple TCP Echo Server</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sock_2tcp_8h.html">net/sock/tcp.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define SOCK_QUEUE_LEN  (1U)</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="structsock__tcp.html">sock_tcp_t</a> sock_queue[SOCK_QUEUE_LEN];</div>
<div class="line">uint8_t buf[128];</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="struct__sock__tl__ep.html">sock_tcp_ep_t</a> local = <a class="code hl_define" href="group__net__sock.html#ga3f10e5b714c03824d6dc4fff5d372b8f">SOCK_IPV6_EP_ANY</a>;</div>
<div class="line">    <a class="code hl_struct" href="structsock__tcp__queue.html">sock_tcp_queue_t</a> queue;</div>
<div class="line"> </div>
<div class="line">    local.<a class="code hl_variable" href="struct__sock__tl__ep.html#a00b5dbff09ee8e87806fff6280966140">port</a> = 12345;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="#ga50008ef716746eb6d2a50c56615d8547">sock_tcp_listen</a>(&amp;queue, &amp;local, sock_queue, SOCK_QUEUE_LEN, 0) &lt; 0) {</div>
<div class="line">        puts(<span class="stringliteral">&quot;Error creating listening queue&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">    puts(<span class="stringliteral">&quot;Listening on port 12345&quot;</span>);</div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <a class="code hl_struct" href="structsock__tcp.html">sock_tcp_t</a> *sock;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_function" href="#ga7321c9f109c2c8f443237bc716f9c263">sock_tcp_accept</a>(&amp;queue, &amp;sock, <a class="code hl_define" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a>) &lt; 0) {</div>
<div class="line">            puts(<span class="stringliteral">&quot;Error accepting new sock&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordtype">int</span> read_res = 0;</div>
<div class="line"> </div>
<div class="line">            puts(<span class="stringliteral">&quot;Reading data&quot;</span>);</div>
<div class="line">            <span class="keywordflow">while</span> (read_res &gt;= 0) {</div>
<div class="line">                read_res = <a class="code hl_function" href="#gaab95990c5902a9a087c6c18b717835cb">sock_tcp_read</a>(sock, &amp;buf, <span class="keyword">sizeof</span>(buf),</div>
<div class="line">                                         <a class="code hl_define" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a>);</div>
<div class="line">                <span class="keywordflow">if</span> (read_res &lt;= 0) {</div>
<div class="line">                    puts(<span class="stringliteral">&quot;Disconnected&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    <span class="keywordtype">int</span> write_res;</div>
<div class="line">                    <a class="code hl_define" href="group__cpu__avr8__common__stdio__wrapper.html#gad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;Read: \&quot;&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; read_res; i++) {</div>
<div class="line">                        <a class="code hl_define" href="group__cpu__avr8__common__stdio__wrapper.html#gad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>, buf[i]);</div>
<div class="line">                    }</div>
<div class="line">                    puts(<span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">if</span> ((write_res = <a class="code hl_function" href="#gac72c6cc4fabd9f34b80a5157e346c24a">sock_tcp_write</a>(sock, &amp;buf,</div>
<div class="line">                                                    read_res)) &lt; 0) {</div>
<div class="line">                        puts(<span class="stringliteral">&quot;Errored on write, finished server loop&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <a class="code hl_function" href="#gad540117597093b7a17ddddc45640a165">sock_tcp_disconnect</a>(sock);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_function" href="#ga56d28140912df5ffc241786a68cb4acc">sock_tcp_stop_listen</a>(&amp;queue);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__cpu__avr8__common__stdio__wrapper_html_gad2eb277496af160238e7306fff780ad2"><div class="ttname"><a href="group__cpu__avr8__common__stdio__wrapper.html#gad2eb277496af160238e7306fff780ad2">printf</a></div><div class="ttdeci">#define printf(...)</div><div class="ttdoc">A wrapper for the printf() function that passes arguments through unmodified, but fails to compile if...</div><div class="ttdef"><b>Definition</b> <a href="stdio_8h_source.html#l00060">stdio.h:60</a></div></div>
<div class="ttc" id="agroup__net__sock__tcp_html_ga50008ef716746eb6d2a50c56615d8547"><div class="ttname"><a href="#ga50008ef716746eb6d2a50c56615d8547">sock_tcp_listen</a></div><div class="ttdeci">int sock_tcp_listen(sock_tcp_queue_t *queue, const sock_tcp_ep_t *local, sock_tcp_t *queue_array, unsigned queue_len, uint16_t flags)</div><div class="ttdoc">Listen for an incoming connection request on local end point.</div></div>
<div class="ttc" id="agroup__net__sock__tcp_html_ga56d28140912df5ffc241786a68cb4acc"><div class="ttname"><a href="#ga56d28140912df5ffc241786a68cb4acc">sock_tcp_stop_listen</a></div><div class="ttdeci">void sock_tcp_stop_listen(sock_tcp_queue_t *queue)</div><div class="ttdoc">Stops listening on TCP listening queue.</div></div>
<div class="ttc" id="agroup__net__sock__tcp_html_ga7321c9f109c2c8f443237bc716f9c263"><div class="ttname"><a href="#ga7321c9f109c2c8f443237bc716f9c263">sock_tcp_accept</a></div><div class="ttdeci">int sock_tcp_accept(sock_tcp_queue_t *queue, sock_tcp_t **sock, uint32_t timeout)</div><div class="ttdoc">Receives and handles TCP connection requests from other peers.</div></div>
<div class="ttc" id="agroup__net__sock__tcp_html_gaab95990c5902a9a087c6c18b717835cb"><div class="ttname"><a href="#gaab95990c5902a9a087c6c18b717835cb">sock_tcp_read</a></div><div class="ttdeci">ssize_t sock_tcp_read(sock_tcp_t *sock, void *data, size_t max_len, uint32_t timeout)</div><div class="ttdoc">Reads data from an established TCP stream.</div></div>
<div class="ttc" id="agroup__net__sock__tcp_html_gac72c6cc4fabd9f34b80a5157e346c24a"><div class="ttname"><a href="#gac72c6cc4fabd9f34b80a5157e346c24a">sock_tcp_write</a></div><div class="ttdeci">ssize_t sock_tcp_write(sock_tcp_t *sock, const void *data, size_t len)</div><div class="ttdoc">Writes data to an established TCP stream.</div></div>
<div class="ttc" id="agroup__net__sock__tcp_html_gad540117597093b7a17ddddc45640a165"><div class="ttname"><a href="#gad540117597093b7a17ddddc45640a165">sock_tcp_disconnect</a></div><div class="ttdeci">void sock_tcp_disconnect(sock_tcp_t *sock)</div><div class="ttdoc">Disconnects a TCP connection.</div></div>
<div class="ttc" id="agroup__net__sock_html_ga3f10e5b714c03824d6dc4fff5d372b8f"><div class="ttname"><a href="group__net__sock.html#ga3f10e5b714c03824d6dc4fff5d372b8f">SOCK_IPV6_EP_ANY</a></div><div class="ttdeci">#define SOCK_IPV6_EP_ANY</div><div class="ttdoc">Address to bind to any IPv6 address.</div><div class="ttdef"><b>Definition</b> <a href="sock_8h_source.html#l00166">sock.h:166</a></div></div>
<div class="ttc" id="agroup__net__sock_html_gaf0c954b49c306f6c125d25ddba9f352e"><div class="ttname"><a href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a></div><div class="ttdeci">#define SOCK_NO_TIMEOUT</div><div class="ttdoc">Special value meaning &quot;wait forever&quot; (don't timeout)</div><div class="ttdef"><b>Definition</b> <a href="sock_8h_source.html#l00173">sock.h:173</a></div></div>
<div class="ttc" id="asock_2tcp_8h_html"><div class="ttname"><a href="sock_2tcp_8h.html">tcp.h</a></div><div class="ttdoc">TCP sock definitions.</div></div>
<div class="ttc" id="astruct__sock__tl__ep_html"><div class="ttname"><a href="struct__sock__tl__ep.html">_sock_tl_ep</a></div><div class="ttdoc">Common IP-based transport layer end point.</div><div class="ttdef"><b>Definition</b> <a href="sock_8h_source.html#l00215">sock.h:215</a></div></div>
<div class="ttc" id="astruct__sock__tl__ep_html_a00b5dbff09ee8e87806fff6280966140"><div class="ttname"><a href="struct__sock__tl__ep.html#a00b5dbff09ee8e87806fff6280966140">_sock_tl_ep::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdoc">transport layer port (in host byte order)</div><div class="ttdef"><b>Definition</b> <a href="sock_8h_source.html#l00247">sock.h:247</a></div></div>
<div class="ttc" id="astructsock__tcp__queue_html"><div class="ttname"><a href="structsock__tcp__queue.html">sock_tcp_queue</a></div><div class="ttdoc">TCP queue type.</div><div class="ttdef"><b>Definition</b> <a href="pkg_2lwip_2include_2sock__types_8h_source.html#l00114">sock_types.h:114</a></div></div>
<div class="ttc" id="astructsock__tcp_html"><div class="ttname"><a href="structsock__tcp.html">sock_tcp</a></div><div class="ttdoc">TCP sock type.</div><div class="ttdef"><b>Definition</b> <a href="pkg_2lwip_2include_2sock__types_8h_source.html#l00101">sock_types.h:101</a></div></div>
</div><!-- fragment --><p>Above you see a simple TCP echo server. Don't forget to also <a class="el" href="creating-an-application.html#including-modules">include</a> the IPv6 module of your networking implementation (e.g. <code>gnrc_ipv6_default</code> for <a class="el" href="group__net__gnrc.html">Generic (GNRC) network stack</a> GNRC) and at least one network device.</p>
<p>After including header files for the <a class="el" href="group__net__af.html">address families</a> and the <a class="el" href="group__net__sock__tcp.html">TCP `sock`s and `queue`s</a> themselves, we create an array of <a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock</a> objects <code>sock_queue</code> as our listen queue (for simplicity of length 1 in our example) and some buffer space <code>buf</code> to store the data received by the server:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="af_8h.html">net/af.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sock_2tcp_8h.html">net/sock/tcp.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define SOCK_QUEUE_LEN  (1U)</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="structsock__tcp.html">sock_tcp_t</a> sock_queue[SOCK_QUEUE_LEN];</div>
<div class="line">uint8_t buf[128];</div>
<div class="ttc" id="aaf_8h_html"><div class="ttname"><a href="af_8h.html">af.h</a></div><div class="ttdoc">Global UNIX address family definitions.</div></div>
</div><!-- fragment --><p>We want to listen for incoming connections on a specific port, so we set a local end point with that port (<code>12345</code> in this case).</p>
<p>We then proceed to creating the listen queue <code>queue</code>. Since it is bound to <code>local</code> it waits for incoming connections to port <code>12345</code>. We don't need any further configuration so we set the flags to 0. In case of an error we stop the program:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="struct__sock__tl__ep.html">sock_tcp_ep_t</a> local = <a class="code hl_define" href="group__net__sock.html#ga3f10e5b714c03824d6dc4fff5d372b8f">SOCK_IPV6_EP_ANY</a>;</div>
<div class="line"><a class="code hl_struct" href="structsock__tcp__queue.html">sock_tcp_queue_t</a> queue;</div>
<div class="line"> </div>
<div class="line">local.<a class="code hl_variable" href="struct__sock__tl__ep.html#a00b5dbff09ee8e87806fff6280966140">port</a> = 12345;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#ga50008ef716746eb6d2a50c56615d8547">sock_tcp_listen</a>(&amp;queue, &amp;local, sock_queue, SOCK_QUEUE_LEN, 0) &lt; 0) {</div>
<div class="line">    puts(<span class="stringliteral">&quot;Error creating listening queue&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
<div class="line">puts(<span class="stringliteral">&quot;Listening on port 12345&quot;</span>);</div>
</div><!-- fragment --><p>The application then waits indefinitely for an incoming connection with <code><a class="el" href="#ga7321c9f109c2c8f443237bc716f9c263" title="Receives and handles TCP connection requests from other peers.">sock_tcp_accept()</a></code>. If we want to timeout this wait period we could alternatively set the <code>timeout</code> parameter of <a class="el" href="#ga7321c9f109c2c8f443237bc716f9c263">sock_tcp_accept()</a> to a value != <a class="el" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a>. If an error occurs during that we print an error message but proceed waiting.</p>
<div class="fragment"><div class="line"><span class="keywordflow">while</span> (1) {</div>
<div class="line">    <a class="code hl_struct" href="structsock__tcp.html">sock_tcp_t</a> *sock;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="#ga7321c9f109c2c8f443237bc716f9c263">sock_tcp_accept</a>(&amp;queue, &amp;sock, <a class="code hl_define" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a>) &lt; 0) {</div>
<div class="line">        puts(<span class="stringliteral">&quot;Error accepting new sock&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
</div><!-- fragment --><p>On successful connection establishment with a client we get a connected <code>sock</code> object and we try to read the incoming stream into <code>buf</code> using <code><a class="el" href="#gaab95990c5902a9a087c6c18b717835cb" title="Reads data from an established TCP stream.">sock_tcp_read()</a></code> on that <code>sock</code>. Again, we could use another timeout period than <a class="el" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a> with this function. If we error we break the read loop and disconnect the <code>sock</code>.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> read_res = 0;</div>
<div class="line"> </div>
<div class="line">puts(<span class="stringliteral">&quot;Reading data&quot;</span>);</div>
<div class="line"><span class="keywordflow">while</span> (read_res &gt;= 0) {</div>
<div class="line">    read_res = <a class="code hl_function" href="#gaab95990c5902a9a087c6c18b717835cb">sock_tcp_read</a>(sock, &amp;buf, <span class="keyword">sizeof</span>(buf),</div>
<div class="line">                             <a class="code hl_define" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (read_res &lt;= 0) {</div>
<div class="line">        puts(<span class="stringliteral">&quot;Disconnected&quot;</span>);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        ...</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="#gad540117597093b7a17ddddc45640a165">sock_tcp_disconnect</a>(sock);</div>
</div><!-- fragment --><p>Otherwise, we print the received message and write it back to the connected <code>sock</code> (an again breaking the loop on error).</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> write_res;</div>
<div class="line"><a class="code hl_define" href="group__cpu__avr8__common__stdio__wrapper.html#gad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;Read: \&quot;&quot;</span>);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; read_res; i++) {</div>
<div class="line">    <a class="code hl_define" href="group__cpu__avr8__common__stdio__wrapper.html#gad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>, buf[i]);</div>
<div class="line">}</div>
<div class="line">puts(<span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> ((write_res = <a class="code hl_function" href="#gac72c6cc4fabd9f34b80a5157e346c24a">sock_tcp_write</a>(sock, &amp;buf,</div>
<div class="line">                                read_res)) &lt; 0) {</div>
<div class="line">    puts(<span class="stringliteral">&quot;Errored on write, finished server loop&quot;</span>);</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>In the case of we somehow manage to break the infinite accepting loop we stop the listening queue appropriately.</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="#ga56d28140912df5ffc241786a68cb4acc">sock_tcp_stop_listen</a>(queue);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2087"></a>
A Simple TCP Echo Client</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="af_8h.html">net/af.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ipv6_2addr_8h.html">net/ipv6/addr.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sock_2tcp_8h.html">net/sock/tcp.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">uint8_t buf[128];</div>
<div class="line"><a class="code hl_struct" href="structsock__tcp.html">sock_tcp_t</a> sock;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> res;</div>
<div class="line">    <a class="code hl_struct" href="struct__sock__tl__ep.html">sock_tcp_ep_t</a> remote = <a class="code hl_define" href="group__net__sock.html#ga3f10e5b714c03824d6dc4fff5d372b8f">SOCK_IPV6_EP_ANY</a>;</div>
<div class="line"> </div>
<div class="line">    remote.<a class="code hl_variable" href="struct__sock__tl__ep.html#a00b5dbff09ee8e87806fff6280966140">port</a> = 12345;</div>
<div class="line">    <a class="code hl_function" href="group__net__ipv6__addr.html#gaa8ae58e1fe2c3faacf94d53d6ce814d5">ipv6_addr_from_str</a>((<a class="code hl_union" href="unionipv6__addr__t.html">ipv6_addr_t</a> *)&amp;remote.<a class="code hl_variable" href="struct__sock__tl__ep.html#a1c9ec7e621447123a22646bb39fc81a9">addr</a>,</div>
<div class="line">                       <span class="stringliteral">&quot;fe80::d8fa:55ff:fedf:4523&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="#ga67c5ddd2a47e6b9b0c60346f71f9ce9e">sock_tcp_connect</a>(&amp;sock, &amp;remote, 0, 0) &lt; 0) {</div>
<div class="line">        puts(<span class="stringliteral">&quot;Error connecting sock&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">    puts(<span class="stringliteral">&quot;Sending \&quot;Hello!\&quot;&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> ((res = <a class="code hl_function" href="#gac72c6cc4fabd9f34b80a5157e346c24a">sock_tcp_write</a>(&amp;sock, <span class="stringliteral">&quot;Hello!&quot;</span>, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;Hello!&quot;</span>))) &lt; 0) {</div>
<div class="line">        puts(<span class="stringliteral">&quot;Errored on write&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span> ((res = <a class="code hl_function" href="#gaab95990c5902a9a087c6c18b717835cb">sock_tcp_read</a>(&amp;sock, &amp;buf, <span class="keyword">sizeof</span>(buf),</div>
<div class="line">                                 <a class="code hl_define" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a>)) &lt;= 0) {</div>
<div class="line">            puts(<span class="stringliteral">&quot;Disconnected&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <a class="code hl_define" href="group__cpu__avr8__common__stdio__wrapper.html#gad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;Read: \&quot;&quot;</span>);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; res; i++) {</div>
<div class="line">            <a class="code hl_define" href="group__cpu__avr8__common__stdio__wrapper.html#gad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>, buf[i]);</div>
<div class="line">        }</div>
<div class="line">        puts(<span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_function" href="#gad540117597093b7a17ddddc45640a165">sock_tcp_disconnect</a>(&amp;sock);</div>
<div class="line">    <span class="keywordflow">return</span> res;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__net__ipv6__addr_html_gaa8ae58e1fe2c3faacf94d53d6ce814d5"><div class="ttname"><a href="group__net__ipv6__addr.html#gaa8ae58e1fe2c3faacf94d53d6ce814d5">ipv6_addr_from_str</a></div><div class="ttdeci">ipv6_addr_t * ipv6_addr_from_str(ipv6_addr_t *result, const char *addr)</div><div class="ttdoc">Converts an IPv6 address string representation to a byte-represented IPv6 address.</div></div>
<div class="ttc" id="agroup__net__sock__tcp_html_ga67c5ddd2a47e6b9b0c60346f71f9ce9e"><div class="ttname"><a href="#ga67c5ddd2a47e6b9b0c60346f71f9ce9e">sock_tcp_connect</a></div><div class="ttdeci">int sock_tcp_connect(sock_tcp_t *sock, const sock_tcp_ep_t *remote, uint16_t local_port, uint16_t flags)</div><div class="ttdoc">Establishes a new TCP sock connection.</div></div>
<div class="ttc" id="aipv6_2addr_8h_html"><div class="ttname"><a href="ipv6_2addr_8h.html">addr.h</a></div><div class="ttdoc">Definitions for IPv6 addresses.</div></div>
<div class="ttc" id="astruct__sock__tl__ep_html_a1c9ec7e621447123a22646bb39fc81a9"><div class="ttname"><a href="struct__sock__tl__ep.html#a1c9ec7e621447123a22646bb39fc81a9">_sock_tl_ep::addr</a></div><div class="ttdeci">union _sock_tl_ep::@384 addr</div><div class="ttdoc">address</div></div>
<div class="ttc" id="aunionipv6__addr__t_html"><div class="ttname"><a href="unionipv6__addr__t.html">ipv6_addr_t</a></div><div class="ttdoc">Data type to represent an IPv6 address.</div><div class="ttdef"><b>Definition</b> <a href="ipv6_2addr_8h_source.html#l00072">addr.h:72</a></div></div>
</div><!-- fragment --><p>Above you see a simple TCP echo client. Again: Don't forget to also <a class="el" href="creating-an-application.html#including-modules">include</a> the IPv6 module of your networking implementation (e.g. <code>gnrc_ipv6_default</code> for <a class="el" href="group__net__gnrc.html">GNRC</a>) and at least one network device. Ad0)ditionally, for the IPv6 address parsing you need the <a class="el" href="group__net__ipv6__addr.html">IPv6 address module</a>.</p>
<p>This time instead of creating a listening queue we create a connected <code>sock</code> object directly. To connect it to a port at a host we setup a remote end-point first (with port <code>12345</code> and address <code>fe80::d8fa:55ff:fedf:4523</code> in this case; your IP address may differ of course) and connect to it using <code><a class="el" href="#ga67c5ddd2a47e6b9b0c60346f71f9ce9e" title="Establishes a new TCP sock connection.">sock_tcp_connect()</a></code>. We neither care about the local port nor additional configuration so we set both the <code>local_port</code> and <code>flags</code> parameter of <code><a class="el" href="#ga67c5ddd2a47e6b9b0c60346f71f9ce9e" title="Establishes a new TCP sock connection.">sock_tcp_connect()</a></code> to <code>0</code>:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="struct__sock__tl__ep.html">sock_tcp_ep_t</a> remote = <a class="code hl_define" href="group__net__sock.html#ga3f10e5b714c03824d6dc4fff5d372b8f">SOCK_IPV6_EP_ANY</a>;</div>
<div class="line"> </div>
<div class="line">remote.<a class="code hl_variable" href="struct__sock__tl__ep.html#a00b5dbff09ee8e87806fff6280966140">port</a> = 12345;</div>
<div class="line"><a class="code hl_function" href="group__net__ipv6__addr.html#gaa8ae58e1fe2c3faacf94d53d6ce814d5">ipv6_addr_from_str</a>((<a class="code hl_union" href="unionipv6__addr__t.html">ipv6_addr_t</a> *)&amp;remote.<a class="code hl_variable" href="struct__sock__tl__ep.html#a1c9ec7e621447123a22646bb39fc81a9">addr</a>,</div>
<div class="line">                   <span class="stringliteral">&quot;fe80::d8fa:55ff:fedf:4523&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#ga67c5ddd2a47e6b9b0c60346f71f9ce9e">sock_tcp_connect</a>(&amp;sock, &amp;remote, 0, 0) &lt; 0) {</div>
<div class="line">    puts(<span class="stringliteral">&quot;Error connecting sock&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment --><p>On error we just terminate the program, on success we send a message (<code>Hello!</code>) and again terminate the program on error:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> ((res = <a class="code hl_function" href="#gac72c6cc4fabd9f34b80a5157e346c24a">sock_tcp_write</a>(&amp;sock, <span class="stringliteral">&quot;Hello!&quot;</span>, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;Hello!&quot;</span>))) &lt; 0) {</div>
<div class="line">    puts(<span class="stringliteral">&quot;Errored on write&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Otherwise, we wait for the reply and print it in case of success (and terminate in case of error):</p>
<div class="fragment"><div class="line"><span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">if</span> ((res = <a class="code hl_function" href="#gaab95990c5902a9a087c6c18b717835cb">sock_tcp_read</a>(&amp;sock, &amp;buf, <span class="keyword">sizeof</span>(buf),</div>
<div class="line">                             <a class="code hl_define" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a>)) &lt;= 0) {</div>
<div class="line">        puts(<span class="stringliteral">&quot;Disconnected&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_define" href="group__cpu__avr8__common__stdio__wrapper.html#gad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;Read: \&quot;&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; res; i++) {</div>
<div class="line">        <a class="code hl_define" href="group__cpu__avr8__common__stdio__wrapper.html#gad2eb277496af160238e7306fff780ad2">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>, buf[i]);</div>
<div class="line">    }</div>
<div class="line">    puts(<span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="#gad540117597093b7a17ddddc45640a165">sock_tcp_disconnect</a>(&amp;sock);</div>
<div class="line"><span class="keywordflow">return</span> res;</div>
</div><!-- fragment --> <table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sock_2tcp_8h.html">tcp.h</a></td></tr>
<tr class="memdesc:sock_2tcp_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TCP sock definitions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga882b5e7467eb5820579921241858e912" id="r_ga882b5e7467eb5820579921241858e912"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__sock__tl__ep.html">_sock_tl_ep</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a></td></tr>
<tr class="memdesc:ga882b5e7467eb5820579921241858e912"><td class="mdescLeft">&#160;</td><td class="mdescRight">An end point for a TCP sock object.  <br /></td></tr>
<tr class="separator:ga882b5e7467eb5820579921241858e912"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0144778bc074e291fcb0d43bd35c0179" id="r_ga0144778bc074e291fcb0d43bd35c0179"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsock__tcp.html">sock_tcp</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a></td></tr>
<tr class="memdesc:ga0144778bc074e291fcb0d43bd35c0179"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for a TCP sock object.  <br /></td></tr>
<tr class="separator:ga0144778bc074e291fcb0d43bd35c0179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga233763551e481f547f1cb07e7e31f981" id="r_ga233763551e481f547f1cb07e7e31f981"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsock__tcp__queue.html">sock_tcp_queue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga233763551e481f547f1cb07e7e31f981">sock_tcp_queue_t</a></td></tr>
<tr class="memdesc:ga233763551e481f547f1cb07e7e31f981"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for a TCP listening queue.  <br /></td></tr>
<tr class="separator:ga233763551e481f547f1cb07e7e31f981"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga67c5ddd2a47e6b9b0c60346f71f9ce9e" id="r_ga67c5ddd2a47e6b9b0c60346f71f9ce9e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga67c5ddd2a47e6b9b0c60346f71f9ce9e">sock_tcp_connect</a> (<a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *sock, const <a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a> *remote, uint16_t local_port, uint16_t flags)</td></tr>
<tr class="memdesc:ga67c5ddd2a47e6b9b0c60346f71f9ce9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establishes a new TCP sock connection.  <br /></td></tr>
<tr class="separator:ga67c5ddd2a47e6b9b0c60346f71f9ce9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50008ef716746eb6d2a50c56615d8547" id="r_ga50008ef716746eb6d2a50c56615d8547"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga50008ef716746eb6d2a50c56615d8547">sock_tcp_listen</a> (<a class="el" href="group__net__sock__async.html#ga233763551e481f547f1cb07e7e31f981">sock_tcp_queue_t</a> *queue, const <a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a> *local, <a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *queue_array, unsigned queue_len, uint16_t flags)</td></tr>
<tr class="memdesc:ga50008ef716746eb6d2a50c56615d8547"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listen for an incoming connection request on <code>local</code> end point.  <br /></td></tr>
<tr class="separator:ga50008ef716746eb6d2a50c56615d8547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad540117597093b7a17ddddc45640a165" id="r_gad540117597093b7a17ddddc45640a165"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad540117597093b7a17ddddc45640a165">sock_tcp_disconnect</a> (<a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *sock)</td></tr>
<tr class="memdesc:gad540117597093b7a17ddddc45640a165"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnects a TCP connection.  <br /></td></tr>
<tr class="separator:gad540117597093b7a17ddddc45640a165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga56d28140912df5ffc241786a68cb4acc" id="r_ga56d28140912df5ffc241786a68cb4acc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga56d28140912df5ffc241786a68cb4acc">sock_tcp_stop_listen</a> (<a class="el" href="group__net__sock__async.html#ga233763551e481f547f1cb07e7e31f981">sock_tcp_queue_t</a> *queue)</td></tr>
<tr class="memdesc:ga56d28140912df5ffc241786a68cb4acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops listening on TCP listening queue.  <br /></td></tr>
<tr class="separator:ga56d28140912df5ffc241786a68cb4acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2610c60b32f1a41f2be9ed4b914d4134" id="r_ga2610c60b32f1a41f2be9ed4b914d4134"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2610c60b32f1a41f2be9ed4b914d4134">sock_tcp_get_local</a> (<a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *sock, <a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a> *ep)</td></tr>
<tr class="memdesc:ga2610c60b32f1a41f2be9ed4b914d4134"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the local end point of a TCP sock object.  <br /></td></tr>
<tr class="separator:ga2610c60b32f1a41f2be9ed4b914d4134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaffcad2b28adab9c4c2e8e03c15d7d647" id="r_gaffcad2b28adab9c4c2e8e03c15d7d647"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaffcad2b28adab9c4c2e8e03c15d7d647">sock_tcp_get_remote</a> (<a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *sock, <a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a> *ep)</td></tr>
<tr class="memdesc:gaffcad2b28adab9c4c2e8e03c15d7d647"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the remote end point of a TCP sock object.  <br /></td></tr>
<tr class="separator:gaffcad2b28adab9c4c2e8e03c15d7d647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6a4176bfb0bd94b5c1b26c9f670fd7f" id="r_gae6a4176bfb0bd94b5c1b26c9f670fd7f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae6a4176bfb0bd94b5c1b26c9f670fd7f">sock_tcp_queue_get_local</a> (<a class="el" href="group__net__sock__async.html#ga233763551e481f547f1cb07e7e31f981">sock_tcp_queue_t</a> *queue, <a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a> *ep)</td></tr>
<tr class="memdesc:gae6a4176bfb0bd94b5c1b26c9f670fd7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the local end point of a TCP sock queue object.  <br /></td></tr>
<tr class="separator:gae6a4176bfb0bd94b5c1b26c9f670fd7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7321c9f109c2c8f443237bc716f9c263" id="r_ga7321c9f109c2c8f443237bc716f9c263"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7321c9f109c2c8f443237bc716f9c263">sock_tcp_accept</a> (<a class="el" href="group__net__sock__async.html#ga233763551e481f547f1cb07e7e31f981">sock_tcp_queue_t</a> *queue, <a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> **sock, uint32_t timeout)</td></tr>
<tr class="memdesc:ga7321c9f109c2c8f443237bc716f9c263"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives and handles TCP connection requests from other peers.  <br /></td></tr>
<tr class="separator:ga7321c9f109c2c8f443237bc716f9c263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab95990c5902a9a087c6c18b717835cb" id="r_gaab95990c5902a9a087c6c18b717835cb"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaab95990c5902a9a087c6c18b717835cb">sock_tcp_read</a> (<a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *sock, void *data, size_t max_len, uint32_t timeout)</td></tr>
<tr class="memdesc:gaab95990c5902a9a087c6c18b717835cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads data from an established TCP stream.  <br /></td></tr>
<tr class="separator:gaab95990c5902a9a087c6c18b717835cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac72c6cc4fabd9f34b80a5157e346c24a" id="r_gac72c6cc4fabd9f34b80a5157e346c24a"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac72c6cc4fabd9f34b80a5157e346c24a">sock_tcp_write</a> (<a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *sock, const void *data, size_t len)</td></tr>
<tr class="memdesc:gac72c6cc4fabd9f34b80a5157e346c24a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data to an established TCP stream.  <br /></td></tr>
<tr class="separator:gac72c6cc4fabd9f34b80a5157e346c24a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga882b5e7467eb5820579921241858e912" name="ga882b5e7467eb5820579921241858e912"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga882b5e7467eb5820579921241858e912">&#9670;&#160;</a></span>sock_tcp_ep_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__sock__tl__ep.html">_sock_tl_ep</a> <a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An end point for a TCP sock object. </p>

<p class="definition">Definition at line <a class="el" href="sock_2tcp_8h_source.html#l00320">320</a> of file <a class="el" href="sock_2tcp_8h_source.html">tcp.h</a>.</p>

</div>
</div>
<a id="ga233763551e481f547f1cb07e7e31f981" name="ga233763551e481f547f1cb07e7e31f981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga233763551e481f547f1cb07e7e31f981">&#9670;&#160;</a></span>sock_tcp_queue_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsock__tcp__queue.html">sock_tcp_queue</a> <a class="el" href="group__net__sock__async.html#ga233763551e481f547f1cb07e7e31f981">sock_tcp_queue_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type for a TCP listening queue. </p>
<dl class="section note"><dt>Note</dt><dd>API implementers: <code>struct <a class="el" href="structsock__tcp__queue.html" title="TCP queue type.">sock_tcp_queue</a></code> needs to be defined by implementation-specific <code>sock_types.h</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sock_2tcp_8h_source.html#l00336">336</a> of file <a class="el" href="sock_2tcp_8h_source.html">tcp.h</a>.</p>

</div>
</div>
<a id="ga0144778bc074e291fcb0d43bd35c0179" name="ga0144778bc074e291fcb0d43bd35c0179"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0144778bc074e291fcb0d43bd35c0179">&#9670;&#160;</a></span>sock_tcp_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsock__tcp.html">sock_tcp</a> <a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type for a TCP sock object. </p>
<dl class="section note"><dt>Note</dt><dd>API implementers: <code>struct <a class="el" href="structsock__tcp.html" title="TCP sock type.">sock_tcp</a></code> needs to be defined by implementation-specific <code>sock_types.h</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sock_2tcp_8h_source.html#l00328">328</a> of file <a class="el" href="sock_2tcp_8h_source.html">tcp.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga7321c9f109c2c8f443237bc716f9c263" name="ga7321c9f109c2c8f443237bc716f9c263"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7321c9f109c2c8f443237bc716f9c263">&#9670;&#160;</a></span>sock_tcp_accept()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sock_tcp_accept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga233763551e481f547f1cb07e7e31f981">sock_tcp_queue_t</a> *</td>          <td class="paramname"><span class="paramname"><em>queue</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> **</td>          <td class="paramname"><span class="paramname"><em>sock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives and handles TCP connection requests from other peers. </p>
<dl class="section pre"><dt>Precondition</dt><dd><code>(queue != NULL) &amp;&amp; (sock != NULL)</code></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>A TCP listening queue. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sock</td><td>A new TCP sock object for the established sock object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Timeout for accept in microseconds. If 0 and no data is available, the function returns immediately. May be <a class="el" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a> for no timeout (wait until data is available).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success. </dd>
<dd>
-EAGAIN, if <code>timeout</code> is <code>0</code> and no data is available. </dd>
<dd>
-ECONNABORTED, if the connection to <code>sock</code> has been aborted while in this function </dd>
<dd>
-EINVAL, if <code>queue</code> was not initialized using <a class="el" href="#ga50008ef716746eb6d2a50c56615d8547">sock_tcp_listen()</a>. </dd>
<dd>
-ENOMEM, if system was not able to allocate sufficient memory to establish connection. </dd>
<dd>
-EPERM, if connections on local end point of <code>queue</code> are not permitted on this system (e.g. by firewall rules). </dd>
<dd>
-ETIMEDOUT, if the operation timed out internally. </dd></dl>

</div>
</div>
<a id="ga67c5ddd2a47e6b9b0c60346f71f9ce9e" name="ga67c5ddd2a47e6b9b0c60346f71f9ce9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67c5ddd2a47e6b9b0c60346f71f9ce9e">&#9670;&#160;</a></span>sock_tcp_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sock_tcp_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *</td>          <td class="paramname"><span class="paramname"><em>sock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a> *</td>          <td class="paramname"><span class="paramname"><em>remote</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>local_port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establishes a new TCP sock connection. </p>
<dl class="section pre"><dt>Precondition</dt><dd><code>sock != NULL</code> </dd>
<dd>
<code>(remote != NULL) &amp;&amp; (remote-&gt;port != 0)</code></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">sock</td><td>The resulting sock object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">remote</td><td>Remote end point for the sock object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_port</td><td>Local port for the connection. May be 0. * If <code>local_port == 0</code> the connection is bound to a random port. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags for the sock object. See also <a class="el" href="group__net__sock.html#net_sock_flags">net_sock_flags</a>. May be 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success. </dd>
<dd>
-EADDRINUSE, if <code>(flags &amp; SOCK_FLAGS_REUSE_EP) == 0</code> and <code>local_port</code> is already used elsewhere </dd>
<dd>
-EAFNOSUPPORT, if <a class="el" href="struct__sock__tl__ep.html#a39cc1104d239f1b620e0714a1c33b247" title="family of sock_ip_ep_t::addr">sock_tcp_ep_t::family</a> of <code>remote</code> is not supported. </dd>
<dd>
-ECONNREFUSED, if no-one is listening on the <code>remote</code> end point. </dd>
<dd>
-EINVAL, if <a class="el" href="struct__sock__tl__ep.html#a1c9ec7e621447123a22646bb39fc81a9" title="address">sock_tcp_ep_t::addr</a> of <code>remote</code> is an invalid address. </dd>
<dd>
-EINVAL, if <a class="el" href="struct__sock__tl__ep.html#a4f667124619a9590a0471585f71b2213" title="stack-specific network interface ID">sock_tcp_ep_t::netif</a> of <code>remote</code> is not a valid interface. </dd>
<dd>
-ENETUNREACH, if network defined by <code>remote</code> is not reachable. </dd>
<dd>
-ENOMEM, if system was not able to allocate sufficient memory to establish connection. </dd>
<dd>
-EPERM, if connections to <code>remote</code> are not permitted on the system (e.g. by firewall rules). </dd>
<dd>
-ETIMEDOUT, if the connection attempt to <code>remote</code> timed out. </dd></dl>

</div>
</div>
<a id="gad540117597093b7a17ddddc45640a165" name="gad540117597093b7a17ddddc45640a165"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad540117597093b7a17ddddc45640a165">&#9670;&#160;</a></span>sock_tcp_disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sock_tcp_disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *</td>          <td class="paramname"><span class="paramname"><em>sock</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnects a TCP connection. </p>
<dl class="section pre"><dt>Precondition</dt><dd><code>sock != NULL</code> If we want to timeout this wait period we could alternatively set the <code>timeout</code> parameter of <a class="el" href="#ga7321c9f109c2c8f443237bc716f9c263">sock_tcp_accept()</a> to a value != <a class="el" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sock</td><td>A TCP sock object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga2610c60b32f1a41f2be9ed4b914d4134" name="ga2610c60b32f1a41f2be9ed4b914d4134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2610c60b32f1a41f2be9ed4b914d4134">&#9670;&#160;</a></span>sock_tcp_get_local()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sock_tcp_get_local </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *</td>          <td class="paramname"><span class="paramname"><em>sock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a> *</td>          <td class="paramname"><span class="paramname"><em>ep</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the local end point of a TCP sock object. </p>
<dl class="section pre"><dt>Precondition</dt><dd><code>(sock != NULL) &amp;&amp; (ep != NULL)</code></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sock</td><td>A TCP sock object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ep</td><td>The local end point.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success. </dd>
<dd>
-EADDRNOTAVAIL, when <code>sock</code> has no local end point. </dd></dl>

</div>
</div>
<a id="gaffcad2b28adab9c4c2e8e03c15d7d647" name="gaffcad2b28adab9c4c2e8e03c15d7d647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaffcad2b28adab9c4c2e8e03c15d7d647">&#9670;&#160;</a></span>sock_tcp_get_remote()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sock_tcp_get_remote </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *</td>          <td class="paramname"><span class="paramname"><em>sock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a> *</td>          <td class="paramname"><span class="paramname"><em>ep</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the remote end point of a TCP sock object. </p>
<dl class="section pre"><dt>Precondition</dt><dd><code>(sock != NULL) &amp;&amp; (ep != NULL)</code></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sock</td><td>A TCP sock object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ep</td><td>The remote end point.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success. </dd>
<dd>
-ENOTCONN, when <code>sock</code> is not connected to a remote end point. </dd></dl>

</div>
</div>
<a id="ga50008ef716746eb6d2a50c56615d8547" name="ga50008ef716746eb6d2a50c56615d8547"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga50008ef716746eb6d2a50c56615d8547">&#9670;&#160;</a></span>sock_tcp_listen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sock_tcp_listen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga233763551e481f547f1cb07e7e31f981">sock_tcp_queue_t</a> *</td>          <td class="paramname"><span class="paramname"><em>queue</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a> *</td>          <td class="paramname"><span class="paramname"><em>local</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *</td>          <td class="paramname"><span class="paramname"><em>queue_array</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned</td>          <td class="paramname"><span class="paramname"><em>queue_len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Listen for an incoming connection request on <code>local</code> end point. </p>
<dl class="section pre"><dt>Precondition</dt><dd><code>queue != NULL</code> </dd>
<dd>
<code>(local != NULL) &amp;&amp; (local-&gt;port != 0)</code> </dd>
<dd>
<code>(queue_array != NULL) &amp;&amp; (queue_len != 0)</code></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>The resulting listening queue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local</td><td>Local end point to listen on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">queue_array</td><td>Array of sock objects. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">queue_len</td><td>Length of <code>queue_array</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags for the listening queue. See also <a class="el" href="group__net__sock.html#net_sock_flags">net_sock_flags</a>. May be 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success. </dd>
<dd>
-EADDRINUSE, if <code>(flags &amp; SOCK_FLAGS_REUSE_EP) == 0</code> and <code>local</code> is already used elsewhere </dd>
<dd>
-EAFNOSUPPORT, if <a class="el" href="struct__sock__tl__ep.html#a39cc1104d239f1b620e0714a1c33b247" title="family of sock_ip_ep_t::addr">sock_tcp_ep_t::family</a> of <code>local</code> is not supported. </dd>
<dd>
-EINVAL, if <a class="el" href="struct__sock__tl__ep.html#a4f667124619a9590a0471585f71b2213" title="stack-specific network interface ID">sock_tcp_ep_t::netif</a> of <code>local</code> is not a valid interface. </dd>
<dd>
-ENOMEM, if no memory was available to listen on <code>queue</code>. </dd></dl>

</div>
</div>
<a id="gae6a4176bfb0bd94b5c1b26c9f670fd7f" name="gae6a4176bfb0bd94b5c1b26c9f670fd7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae6a4176bfb0bd94b5c1b26c9f670fd7f">&#9670;&#160;</a></span>sock_tcp_queue_get_local()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sock_tcp_queue_get_local </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga233763551e481f547f1cb07e7e31f981">sock_tcp_queue_t</a> *</td>          <td class="paramname"><span class="paramname"><em>queue</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga882b5e7467eb5820579921241858e912">sock_tcp_ep_t</a> *</td>          <td class="paramname"><span class="paramname"><em>ep</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the local end point of a TCP sock queue object. </p>
<dl class="section pre"><dt>Precondition</dt><dd><code>(sock != NULL) &amp;&amp; (ep != NULL)</code></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>A TCP sock queue object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ep</td><td>The local end point.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success. </dd>
<dd>
-EADDRNOTAVAIL, when <code>queue</code> has no local end point. </dd></dl>

</div>
</div>
<a id="gaab95990c5902a9a087c6c18b717835cb" name="gaab95990c5902a9a087c6c18b717835cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaab95990c5902a9a087c6c18b717835cb">&#9670;&#160;</a></span>sock_tcp_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t sock_tcp_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *</td>          <td class="paramname"><span class="paramname"><em>sock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>max_len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads data from an established TCP stream. </p>
<dl class="section pre"><dt>Precondition</dt><dd><code>(sock != NULL) &amp;&amp; (data != NULL) &amp;&amp; (max_len &gt; 0)</code></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sock</td><td>A TCP sock object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer where the read data should be stored. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_len</td><td>Maximum space available at <code>data</code>. If read data exceeds <code>max_len</code> the data is truncated and the remaining data can be retrieved later on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Timeout for receive in microseconds. If 0 and no data is available, the function returns immediately. May be <a class="el" href="group__net__sock.html#gaf0c954b49c306f6c125d25ddba9f352e">SOCK_NO_TIMEOUT</a> for no timeout (wait until data is available).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Function may block.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes read on success. </dd>
<dd>
0, if no read data is available or the connection was orderly closed by the remote host. </dd>
<dd>
-EAGAIN, if <code>timeout</code> is <code>0</code> and no data is available. </dd>
<dd>
-ECONNABORTED, if the connection is aborted while waiting for the next data. </dd>
<dd>
-ECONNRESET, if the connection was forcibly closed by remote end point of <code>sock</code>. </dd>
<dd>
-ENOTCONN, when <code>sock</code> is not connected to a remote end point. </dd>
<dd>
-ETIMEDOUT, if <code>timeout</code> expired. </dd></dl>

</div>
</div>
<a id="ga56d28140912df5ffc241786a68cb4acc" name="ga56d28140912df5ffc241786a68cb4acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga56d28140912df5ffc241786a68cb4acc">&#9670;&#160;</a></span>sock_tcp_stop_listen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sock_tcp_stop_listen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga233763551e481f547f1cb07e7e31f981">sock_tcp_queue_t</a> *</td>          <td class="paramname"><span class="paramname"><em>queue</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops listening on TCP listening queue. </p>
<dl class="section pre"><dt>Precondition</dt><dd><code>queue != NULL</code></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>A TCP listening queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac72c6cc4fabd9f34b80a5157e346c24a" name="gac72c6cc4fabd9f34b80a5157e346c24a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac72c6cc4fabd9f34b80a5157e346c24a">&#9670;&#160;</a></span>sock_tcp_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t sock_tcp_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__sock__async.html#ga0144778bc074e291fcb0d43bd35c0179">sock_tcp_t</a> *</td>          <td class="paramname"><span class="paramname"><em>sock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes data to an established TCP stream. </p>
<dl class="section pre"><dt>Precondition</dt><dd><code>(sock != NULL)</code> </dd>
<dd>
<code>if (len != NULL): (data != NULL)</code></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sock</td><td>A TCP sock object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to the data to be written to the stream. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Maximum space available at <code>data</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Function may block.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written on success. </dd>
<dd>
-ECONNABORTED, if the connection is aborted while waiting for the next data. </dd>
<dd>
-ECONNRESET, if the connection was forcibly closed by remote end point of <code>sock</code>. </dd>
<dd>
-ENOMEM, if no memory was available to written <code>data</code>. </dd>
<dd>
-ENOTCONN, if <code>sock</code> is not connected to a remote end point. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->

    </div>
  </body>
</html>
