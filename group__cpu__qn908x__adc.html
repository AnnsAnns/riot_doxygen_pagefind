<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIOT OS: NXP QN908x ADC - Analog to Digital converter</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="jquery.js"></script> -->
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<!-- <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> -->
<script src="/pagefind/pagefind-ui.js"></script>
<script>
  // Check whether the PagefindUI class is available
  if (typeof PagefindUI === 'undefined') {
    console.error('PagefindUI class is not available | Dev Build');
  } else {
    // // Remove the "searchstub" element and initialize the PagefindUI class
    // document.getElementById("#searchstub").remove();
    // Initialize the PagefindUI class with the element id "search"
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
  }
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="global.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <script>
    // Print the data within the NAVTREE variable from the navtreedata.js file
    var navtree = NAVTREE;
    console.log(navtree);
  </script>
<div class="flex flex-row gap-4 w-screen font-sans text-lg max-h-screen overscroll-contain justify-items-stretch bg-neutral-900">
  <!--Sidebar-->
  <div data-pagefind-ignore="all" class="w-1/3 max-w-md flex-auto h-screen bg-neutral-800 ring-2 ring-neutral-700 shadow-neutral-800 shadow-2xl rounded-xl p-3 ml-1 my-2 mr-3 flex flex-col justify-around">
    <div id="top" class="justify-self-center content-center items-center place-content-center">
      <img alt="Logo" src="riot-logo.svg"/>
      <div id="projectbrief">
        The friendly Operating System for the Internet of Things
      </div>
    </div>
    <div id="search" class="place-content-center" class="overflow-y-scroll max-h-64 bg-slate-400 ring-2 ring-white text-white" >
      <h1>Searchbar via Pagefind</h1>
      <!-- <div id="searchstub" class="flex items-center border border-gray-300 rounded-lg p-2 shadow-sm">
        <input type="text" placeholder="Search is only available in Production Build ..." class="flex-grow p-2 outline-none">
      </div> -->
    </div>
    <div id="navtree">
      <script>
        // The navtree variable is always a pair of two elements (key, value)
        // The key is the name we should display and the value is the link to the page
        // Generate the navtree from the navtreedata.js file and put it under the navtree div
        var navtree = NAVTREE[0][2];
        var navtreeHTML = "<h1>Navigation based on Doxygen</h1> <ul>";
        for (var i = 0; i < navtree.length; i++) {
          navtreeHTML += "<li><a href='" + navtree[i][1] + "'>" + navtree[i][0] + "</a></li>";
          if (i == 5) {
            navtreeHTML += '<li><h3 class="ring-2 ring-white"> Random Insert for Demonstration </h3></li>';
          }
        }
        navtreeHTML += "</ul>";
        document.getElementById("navtree").innerHTML = navtreeHTML;
      </script>
    </div>
    <ul>
      <li class="footer">
        Generated on Tue Sep 24 2024 11:16:27 by 
          <a href="http://www.doxygen.org/index.html">
            Doxygen
          </a> 
        1.12.0
      </li>
    </ul>
  </div>
  <!--Main Content-->
  <div class="hidden">
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__cpu__qn908x__adc.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">NXP QN908x ADC - Analog to Digital converter<div class="ingroups"><a class="el" href="group__cpu.html">CPU</a> &raquo; <a class="el" href="group__cpu__qn908x.html">NXP QN908x</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>NXP QN908x ADC driver  
</p>
<p>NXP QN908x ADC driver </p>
<p>This ADC is a differential sigma-delta ADC. There are 9 external signals named ADC0 to ADC7 and ADC_VREFI that can be connected to specific external GPIO pins. There are several combinations of measurements possible with the ADC module using these external signals as well as some internal signals, but not every combination is a possible input pair to the ADC.</p>
<p>The ADC block runs at either 4 MHz or 32 KHz from the high speed or low speed clock sources respective. An additional divisor is available to select some intermediate clock values. However, this is not the sample rate, since a single sample from <a class="el" href="group__drivers__periph__adc.html#ga0ffa20b26f649b1879b487f9aa0aa4b4">adc_sample()</a> requires multiple internal samples which are then filtered and decimated by the hardware, giving about 128 slower sample rate than the selected clock.</p>
<p>Each board-defined ADC line is configured with a single integer value which is the logic or of the following values:</p><ul>
<li>The differential pair of signals among the options in <a class="el" href="qn908x_2include_2periph__cpu_8h.html#ae4f11c2a2596f24bf17ef128da122b83">qn908x_adc_channel_t</a>,</li>
<li>For those channels that use the "Vinn" signal, a value selecting the Vinn signal in <a class="el" href="qn908x_2include_2periph__cpu_8h.html#ac72f8dbacd89a0bd6c33654409d938f6">qn908x_adc_vinn_t</a>,</li>
<li>The reference voltage "Vref" that the ADC will use for its full range selected with <a class="el" href="qn908x_2include_2periph__cpu_8h.html#a3ef56804a626b9072d0578747d941cae">qn908x_adc_vref_t</a>,</li>
<li>The ADC input gain as selected by <a class="el" href="qn908x_2include_2periph__cpu_8h.html#aace28180461989db4b23d823b84db093">qn908x_adc_gain_t</a>, which will multiply the differential input by a factor between 0.5 and 2, and</li>
<li>An optional gain flag <a class="el" href="qn908x_2include_2periph__cpu_8h.html#a0eec9ae0c58babedd37c1ea59e8472cc">ADC_VREF_GAIN_X15</a>.</li>
<li>An optional PGA enabled flag <a class="el" href="qn908x_2include_2periph__cpu_8h.html#ac478beb12ce9fd2efcefb70c28c08e38">ADC_PGA_ENABLE</a>.</li>
</ul>
<p>The hardware resolution of the ADC data is always 23-bits signed, but smaller resolutions can be requested which will result in a smaller output value.</p>
<p>An internal temperature sensor is available and connected to the ADC when selecting <a class="el" href="qn908x_2include_2periph__cpu_8h.html#ae4f11c2a2596f24bf17ef128da122b83a1ed27e96d73bc3032ec54d2738163cf4">ADC_CHANNEL_TEMP</a> as the channel. In this case the returned value is still a number that represents the temperature dependent voltage level of the internal signal which then needs to be converted to a temperature by the application using calibration parameters. When using the internal temperature sensor, the 1.2V bandgap Vref is recommended with a Vinn of 1/2 Vref since the measured voltage is about 800 mV at room temperature.</p>
<p>A special microvolts (ADC_RES_UV) resolution value for <a class="el" href="group__drivers__periph__adc.html#gae4d48fdca21097fd8b34324f33ae4020">adc_res_t</a> is supported when using the internal 1.2 V bandgap as the reference voltage, in which case <a class="el" href="group__drivers__periph__adc.html#ga0ffa20b26f649b1879b487f9aa0aa4b4">adc_sample</a> will return the measured value in microvolts as a signed integer, with a max range of +/- 1.8 V when using the x1.5 Vref multiplier. This special resolution mode takes into account the factory calibration of the internal reference voltage for more accurate readings. In any other case, the return value is a signed integer with as many bits as resolution requested not including the sign bit. Note that the return value may be a negative when measuring a negative differential voltage between the plus and minus side of the input.</p>
<p>For example, if 8-bit resolution is requested for an ADC line where the channel connects the - side to Vinn configured as Vss, a maximum value of 255 can be returned when the + side level is as high as the Vref signal. However, a negative value of -255 is also possible if Vinn is configured as Vref and the + side level is as low as Vss.</p>
<h3><a class="anchor" id="autotoc_md70"></a>
ADC configuration example (for periph_conf.h)</h3>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_struct" href="structadc__conf__t.html">adc_conf_t</a> adc_config[] = {</div>
<div class="line">    <span class="comment">/* Pin A11 to Vss, 1.8v Vref. */</span></div>
<div class="line">    <a class="code hl_enumvalue" href="qn908x_2include_2periph__cpu_8h.html#ae4f11c2a2596f24bf17ef128da122b83adb495d448e06e06dbce8730438e08bbf">ADC_CHANNEL_ADC7_VINN</a> | <a class="code hl_define" href="qn908x_2include_2periph__cpu_8h.html#a0eec9ae0c58babedd37c1ea59e8472cc">ADC_VREF_GAIN_X15</a>,</div>
<div class="line">    <span class="comment">/* Pin A10 to A11, 1.2V Vref. */</span></div>
<div class="line">    <a class="code hl_enumvalue" href="qn908x_2include_2periph__cpu_8h.html#ae4f11c2a2596f24bf17ef128da122b83acd308b77afc64c07049b457391342f85">ADC_CHANNEL_ADC6_ADC7</a>,</div>
<div class="line">    <span class="comment">/* Temperature (in V) over to 0.6 V, 1.2 V Vref. */</span></div>
<div class="line">    <a class="code hl_enumvalue" href="qn908x_2include_2periph__cpu_8h.html#ae4f11c2a2596f24bf17ef128da122b83a1ed27e96d73bc3032ec54d2738163cf4">ADC_CHANNEL_TEMP</a> | <a class="code hl_enumvalue" href="qn908x_2include_2periph__cpu_8h.html#ac72f8dbacd89a0bd6c33654409d938f6a36cdfa63a92b19ef0a36055c9db348ad">ADC_VINN_VREF_2</a>,</div>
<div class="line">    <span class="comment">/* Internal &quot;battery monitor&quot;, Vcc/4 to Vss, 1.2V Vref. */</span></div>
<div class="line">    <a class="code hl_enumvalue" href="qn908x_2include_2periph__cpu_8h.html#ae4f11c2a2596f24bf17ef128da122b83adec41259cf2fb1202ca482acea0a46ed">ADC_CHANNEL_VCC4_VINN</a> | <a class="code hl_enumvalue" href="qn908x_2include_2periph__cpu_8h.html#ac72f8dbacd89a0bd6c33654409d938f6a92882959d3d802af594615bfc271ffb9">ADC_VINN_AVSS</a>,</div>
<div class="line">};</div>
<div class="line"><span class="preprocessor">#define ADC_NUMOF           ARRAY_SIZE(adc_config)</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define QN908X_ADC_CLOCK    ADC_CLOCK_500K</span></div>
<div class="ttc" id="aqn908x_2include_2periph__cpu_8h_html_a0eec9ae0c58babedd37c1ea59e8472cc"><div class="ttname"><a href="qn908x_2include_2periph__cpu_8h.html#a0eec9ae0c58babedd37c1ea59e8472cc">ADC_VREF_GAIN_X15</a></div><div class="ttdeci">#define ADC_VREF_GAIN_X15</div><div class="ttdoc">ADC Vref x1.5 multiplier flag.</div><div class="ttdef"><b>Definition</b> <a href="qn908x_2include_2periph__cpu_8h_source.html#l00267">periph_cpu.h:267</a></div></div>
<div class="ttc" id="aqn908x_2include_2periph__cpu_8h_html_ac72f8dbacd89a0bd6c33654409d938f6a36cdfa63a92b19ef0a36055c9db348ad"><div class="ttname"><a href="qn908x_2include_2periph__cpu_8h.html#ac72f8dbacd89a0bd6c33654409d938f6a36cdfa63a92b19ef0a36055c9db348ad">ADC_VINN_VREF_2</a></div><div class="ttdeci">@ ADC_VINN_VREF_2</div><div class="ttdoc">Use Vinn := 1/2 * Vref.</div><div class="ttdef"><b>Definition</b> <a href="qn908x_2include_2periph__cpu_8h_source.html#l00292">periph_cpu.h:292</a></div></div>
<div class="ttc" id="aqn908x_2include_2periph__cpu_8h_html_ac72f8dbacd89a0bd6c33654409d938f6a92882959d3d802af594615bfc271ffb9"><div class="ttname"><a href="qn908x_2include_2periph__cpu_8h.html#ac72f8dbacd89a0bd6c33654409d938f6a92882959d3d802af594615bfc271ffb9">ADC_VINN_AVSS</a></div><div class="ttdeci">@ ADC_VINN_AVSS</div><div class="ttdoc">Use Vinn := Vss.</div><div class="ttdef"><b>Definition</b> <a href="qn908x_2include_2periph__cpu_8h_source.html#l00293">periph_cpu.h:293</a></div></div>
<div class="ttc" id="aqn908x_2include_2periph__cpu_8h_html_ae4f11c2a2596f24bf17ef128da122b83a1ed27e96d73bc3032ec54d2738163cf4"><div class="ttname"><a href="qn908x_2include_2periph__cpu_8h.html#ae4f11c2a2596f24bf17ef128da122b83a1ed27e96d73bc3032ec54d2738163cf4">ADC_CHANNEL_TEMP</a></div><div class="ttdeci">@ ADC_CHANNEL_TEMP</div><div class="ttdoc">Sample internal temperature.</div><div class="ttdef"><b>Definition</b> <a href="qn908x_2include_2periph__cpu_8h_source.html#l00240">periph_cpu.h:240</a></div></div>
<div class="ttc" id="aqn908x_2include_2periph__cpu_8h_html_ae4f11c2a2596f24bf17ef128da122b83acd308b77afc64c07049b457391342f85"><div class="ttname"><a href="qn908x_2include_2periph__cpu_8h.html#ae4f11c2a2596f24bf17ef128da122b83acd308b77afc64c07049b457391342f85">ADC_CHANNEL_ADC6_ADC7</a></div><div class="ttdeci">@ ADC_CHANNEL_ADC6_ADC7</div><div class="ttdoc">Sample ADC6 / ADC7.</div><div class="ttdef"><b>Definition</b> <a href="qn908x_2include_2periph__cpu_8h_source.html#l00231">periph_cpu.h:231</a></div></div>
<div class="ttc" id="aqn908x_2include_2periph__cpu_8h_html_ae4f11c2a2596f24bf17ef128da122b83adb495d448e06e06dbce8730438e08bbf"><div class="ttname"><a href="qn908x_2include_2periph__cpu_8h.html#ae4f11c2a2596f24bf17ef128da122b83adb495d448e06e06dbce8730438e08bbf">ADC_CHANNEL_ADC7_VINN</a></div><div class="ttdeci">@ ADC_CHANNEL_ADC7_VINN</div><div class="ttdoc">Sample ADC7 / Vinn.</div><div class="ttdef"><b>Definition</b> <a href="qn908x_2include_2periph__cpu_8h_source.html#l00239">periph_cpu.h:239</a></div></div>
<div class="ttc" id="aqn908x_2include_2periph__cpu_8h_html_ae4f11c2a2596f24bf17ef128da122b83adec41259cf2fb1202ca482acea0a46ed"><div class="ttname"><a href="qn908x_2include_2periph__cpu_8h.html#ae4f11c2a2596f24bf17ef128da122b83adec41259cf2fb1202ca482acea0a46ed">ADC_CHANNEL_VCC4_VINN</a></div><div class="ttdeci">@ ADC_CHANNEL_VCC4_VINN</div><div class="ttdoc">Sample 1/4 Vcc / Vinn.</div><div class="ttdef"><b>Definition</b> <a href="qn908x_2include_2periph__cpu_8h_source.html#l00241">periph_cpu.h:241</a></div></div>
<div class="ttc" id="astructadc__conf__t_html"><div class="ttname"><a href="structadc__conf__t.html">adc_conf_t</a></div><div class="ttdoc">ADC device configuration.</div><div class="ttdef"><b>Definition</b> <a href="efm32_2include_2periph__cpu_8h_source.html#l00379">periph_cpu.h:379</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->

    </div>
  </body>
</html>
