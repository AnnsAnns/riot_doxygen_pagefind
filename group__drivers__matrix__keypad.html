<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIOT OS: Matrix Keypad</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="jquery.js"></script> -->
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<!-- <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> -->
<script src="/pagefind/pagefind-ui.js"></script>
<script>
  // Check whether the PagefindUI class is available
  if (typeof PagefindUI === 'undefined') {
    console.error('PagefindUI class is not available | Dev Build');
  } else {
    // // Remove the "searchstub" element and initialize the PagefindUI class
    // document.getElementById("#searchstub").remove();
    // Initialize the PagefindUI class with the element id "search"
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
  }
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="global.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <script>
    // Print the data within the NAVTREE variable from the navtreedata.js file
    var navtree = NAVTREE;
    console.log(navtree);
  </script>
<div class="flex flex-row gap-4 w-screen font-sans text-lg max-h-screen overscroll-contain justify-items-stretch bg-neutral-900">
  <!--Sidebar-->
  <div data-pagefind-ignore="all" class="w-1/3 max-w-md flex-auto h-screen bg-neutral-800 ring-2 ring-neutral-700 shadow-neutral-800 shadow-2xl rounded-xl p-3 ml-1 my-2 mr-3 flex flex-col justify-around">
    <div id="top" class="justify-self-center content-center items-center place-content-center">
      <img alt="Logo" src="riot-logo.svg"/>
      <div id="projectbrief">
        The friendly Operating System for the Internet of Things
      </div>
    </div>
    <div id="search" class="place-content-center" class="overflow-y-scroll max-h-64 bg-slate-400 ring-2 ring-white text-white" >
      <h1>Searchbar via Pagefind</h1>
      <!-- <div id="searchstub" class="flex items-center border border-gray-300 rounded-lg p-2 shadow-sm">
        <input type="text" placeholder="Search is only available in Production Build ..." class="flex-grow p-2 outline-none">
      </div> -->
    </div>
    <div id="navtree">
      <script>
        // The navtree variable is always a pair of two elements (key, value)
        // The key is the name we should display and the value is the link to the page
        // Generate the navtree from the navtreedata.js file and put it under the navtree div
        var navtree = NAVTREE[0][2];
        var navtreeHTML = "<h1>Navigation based on Doxygen</h1> <ul>";
        for (var i = 0; i < navtree.length; i++) {
          navtreeHTML += "<li><a href='" + navtree[i][1] + "'>" + navtree[i][0] + "</a></li>";
          if (i == 5) {
            navtreeHTML += '<li><h3 class="ring-2 ring-white"> Random Insert for Demonstration </h3></li>';
          }
        }
        navtreeHTML += "</ul>";
        document.getElementById("navtree").innerHTML = navtreeHTML;
      </script>
    </div>
    <ul>
      <li class="footer">
        Generated on Tue Sep 24 2024 11:16:27 by 
          <a href="http://www.doxygen.org/index.html">
            Doxygen
          </a> 
        1.12.0
      </li>
    </ul>
  </div>
  <!--Main Content-->
  <div class="hidden">
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__drivers__matrix__keypad.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Matrix Keypad<div class="ingroups"><a class="el" href="group__drivers.html">Drivers</a> &raquo; <a class="el" href="group__drivers__sensors.html">Sensor Device Drivers</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Matrix keypad driver for row/column keypads  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Matrix keypad driver for row/column keypads </p>
<p>This module implements a simple matrix keypad driver where keys are connected between GPIO columns and rows. It works best with diodes in series with the switches to prevent key ghosting, but it can be used without these diodes. <a class="el" href="#ga82a04ca5044662858728b189d175fa32">CONFIG_MATRIX_KEYPAD_ROWS_USE_OPEN_DRAIN</a> can be enabled when the keypad doesn't use diodes in the switches.</p>
<p>The keypad works by configuring the column GPIOs as input with pull-ups. Each row is configured as open drain with pull-up. One by one the rows are set to pull their output low. For each row the column GPIOs are read and the state is checked. When a key is pressed the column GPIO of that switch will read low as soon as the row it is on is pulled low.</p>
<p>The debouncing algorithm is a pattern style debounce where the switch must be in one position for a number of samples, then a set of "don't care" samples and then in the other position for a number of samples. The samples in the middle allow for a period where the switch can be either low or high without affecting the transition. The exact pattern is determined by <a class="el" href="#gaa80d44d3763dd8a85cb967ba068cf9f3">CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_BEGIN</a> and <a class="el" href="#gad309c53ba7a9448a298d87ba420f73dc">CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_END</a>. These are used as mask where the switch must be in a determined state. The bits where neither pattern is set is used as the "don't care" set of samples.</p>
<p>A full scan of the matrix keypad is done via the <a class="el" href="#gac6ca1b06c03bc385b2d0430a1dfdf49e">matrix_keypad_scan</a> function. This function iterates over all rows and columns to update the stored history of every pin.</p>
<p>When a state change is detected on a switch, the <a class="el" href="#ga5feba9dc3d19cfcddc5b7191f8ad9008">matrix_keypad_cb_t</a> callback is called with the row and column number together with the new state of the switch (pressed or not pressed). </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix__keypad_8h.html">matrix_keypad.h</a></td></tr>
<tr class="memdesc:matrix__keypad_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface definition for the matrix keypad. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix__keypad__params_8h.html">matrix_keypad_params.h</a></td></tr>
<tr class="memdesc:matrix__keypad__params_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default configuration. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmatrix__keypad__params__t.html">matrix_keypad_params_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device initialization parameters.  <a href="structmatrix__keypad__params__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmatrix__keypad__t.html">matrix_keypad_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device descriptor for the driver.  <a href="structmatrix__keypad__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gababd1b99c2dcbcf7a33116bf7dcd7e8b" id="r_gababd1b99c2dcbcf7a33116bf7dcd7e8b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gababd1b99c2dcbcf7a33116bf7dcd7e8b">CONFIG_MATRIX_KEYPAD_NUM_ROWS</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:gababd1b99c2dcbcf7a33116bf7dcd7e8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of rows.  <br /></td></tr>
<tr class="separator:gababd1b99c2dcbcf7a33116bf7dcd7e8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5967420f77fd25b02f139b8c5979f2b" id="r_gaf5967420f77fd25b02f139b8c5979f2b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf5967420f77fd25b02f139b8c5979f2b">CONFIG_MATRIX_KEYPAD_NUM_COLUMNS</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:gaf5967420f77fd25b02f139b8c5979f2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of columns.  <br /></td></tr>
<tr class="separator:gaf5967420f77fd25b02f139b8c5979f2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa80d44d3763dd8a85cb967ba068cf9f3" id="r_gaa80d44d3763dd8a85cb967ba068cf9f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa80d44d3763dd8a85cb967ba068cf9f3">CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_BEGIN</a>&#160;&#160;&#160;0xC0</td></tr>
<tr class="memdesc:gaa80d44d3763dd8a85cb967ba068cf9f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debounce pattern high to low bits.  <br /></td></tr>
<tr class="separator:gaa80d44d3763dd8a85cb967ba068cf9f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad309c53ba7a9448a298d87ba420f73dc" id="r_gad309c53ba7a9448a298d87ba420f73dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad309c53ba7a9448a298d87ba420f73dc">CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_END</a>&#160;&#160;&#160;0x7</td></tr>
<tr class="memdesc:gad309c53ba7a9448a298d87ba420f73dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debounce pattern low to high bits.  <br /></td></tr>
<tr class="separator:gad309c53ba7a9448a298d87ba420f73dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82a04ca5044662858728b189d175fa32" id="r_ga82a04ca5044662858728b189d175fa32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga82a04ca5044662858728b189d175fa32">CONFIG_MATRIX_KEYPAD_ROWS_USE_OPEN_DRAIN</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga82a04ca5044662858728b189d175fa32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use open drain GPIO mode.  <br /></td></tr>
<tr class="separator:ga82a04ca5044662858728b189d175fa32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa200a961debfdcfe7d6889127129530b" id="r_gaa200a961debfdcfe7d6889127129530b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa200a961debfdcfe7d6889127129530b">MATRIX_KEYPAD_ROWS_GPIO_MODE</a>&#160;&#160;&#160;<a class="el" href="atxmega_2include_2periph__cpu_8h.html#a201df5e2845212d28c89e2cf3fdaa642a1b59f059dea546f0248fb26232ee3531">GPIO_OUT</a></td></tr>
<tr class="memdesc:gaa200a961debfdcfe7d6889127129530b"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO mode used for the row GPIOs.  <br /></td></tr>
<tr class="separator:gaa200a961debfdcfe7d6889127129530b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga783555adfb1fb2680610ca6cc63234dc" id="r_ga783555adfb1fb2680610ca6cc63234dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga783555adfb1fb2680610ca6cc63234dc">MATRIX_KEYPAD_DEBOUNCE_MASK</a>&#160;&#160;&#160;    (<a class="el" href="#gaa80d44d3763dd8a85cb967ba068cf9f3">CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_BEGIN</a> | <a class="el" href="#gad309c53ba7a9448a298d87ba420f73dc">CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_END</a>)</td></tr>
<tr class="memdesc:ga783555adfb1fb2680610ca6cc63234dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debounce pattern mask.  <br /></td></tr>
<tr class="separator:ga783555adfb1fb2680610ca6cc63234dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gab4a96502cc17f4a2d355273188f15492" id="r_gab4a96502cc17f4a2d355273188f15492"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab4a96502cc17f4a2d355273188f15492">matrix_keypad_state_row_t</a></td></tr>
<tr class="memdesc:gab4a96502cc17f4a2d355273188f15492"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type definition for a full row (all columns) state, variable width depending on the number of columns.  <br /></td></tr>
<tr class="separator:gab4a96502cc17f4a2d355273188f15492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5feba9dc3d19cfcddc5b7191f8ad9008" id="r_ga5feba9dc3d19cfcddc5b7191f8ad9008"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5feba9dc3d19cfcddc5b7191f8ad9008">matrix_keypad_cb_t</a>) (void *arg, size_t row, size_t column, bool state)</td></tr>
<tr class="memdesc:ga5feba9dc3d19cfcddc5b7191f8ad9008"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for key state changes.  <br /></td></tr>
<tr class="separator:ga5feba9dc3d19cfcddc5b7191f8ad9008"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad5541860cf1318cb91dee462d64f4590" id="r_gad5541860cf1318cb91dee462d64f4590"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad5541860cf1318cb91dee462d64f4590">matrix_keypad_init</a> (<a class="el" href="structmatrix__keypad__t.html">matrix_keypad_t</a> *dev, const <a class="el" href="structmatrix__keypad__params__t.html">matrix_keypad_params_t</a> *params, <a class="el" href="#ga5feba9dc3d19cfcddc5b7191f8ad9008">matrix_keypad_cb_t</a> callback, void *arg)</td></tr>
<tr class="memdesc:gad5541860cf1318cb91dee462d64f4590"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the given device.  <br /></td></tr>
<tr class="separator:gad5541860cf1318cb91dee462d64f4590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6ca1b06c03bc385b2d0430a1dfdf49e" id="r_gac6ca1b06c03bc385b2d0430a1dfdf49e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac6ca1b06c03bc385b2d0430a1dfdf49e">matrix_keypad_scan</a> (<a class="el" href="structmatrix__keypad__t.html">matrix_keypad_t</a> *dev)</td></tr>
<tr class="memdesc:gac6ca1b06c03bc385b2d0430a1dfdf49e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scan through the keypad matrix.  <br /></td></tr>
<tr class="separator:gac6ca1b06c03bc385b2d0430a1dfdf49e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaa80d44d3763dd8a85cb967ba068cf9f3" name="gaa80d44d3763dd8a85cb967ba068cf9f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa80d44d3763dd8a85cb967ba068cf9f3">&#9670;&#160;</a></span>CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_BEGIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_BEGIN&#160;&#160;&#160;0xC0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debounce pattern high to low bits. </p>
<p>This pattern should consist of bits set on the most significant bits of the value. The number of bits set determines the number of scans the key must be in the current state before a change is processed. </p>

<p class="definition">Definition at line <a class="el" href="matrix__keypad_8h_source.html#l00085">85</a> of file <a class="el" href="matrix__keypad_8h_source.html">matrix_keypad.h</a>.</p>

</div>
</div>
<a id="gad309c53ba7a9448a298d87ba420f73dc" name="gad309c53ba7a9448a298d87ba420f73dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad309c53ba7a9448a298d87ba420f73dc">&#9670;&#160;</a></span>CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_END</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_END&#160;&#160;&#160;0x7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debounce pattern low to high bits. </p>
<p>This pattern should consist of bits set on the least significant bits of the value. The number of bits set determines the number of scans the key must be in the next state before a change is processed. </p>

<p class="definition">Definition at line <a class="el" href="matrix__keypad_8h_source.html#l00096">96</a> of file <a class="el" href="matrix__keypad_8h_source.html">matrix_keypad.h</a>.</p>

</div>
</div>
<a id="gaf5967420f77fd25b02f139b8c5979f2b" name="gaf5967420f77fd25b02f139b8c5979f2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf5967420f77fd25b02f139b8c5979f2b">&#9670;&#160;</a></span>CONFIG_MATRIX_KEYPAD_NUM_COLUMNS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_MATRIX_KEYPAD_NUM_COLUMNS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of columns. </p>

<p class="definition">Definition at line <a class="el" href="matrix__keypad_8h_source.html#l00074">74</a> of file <a class="el" href="matrix__keypad_8h_source.html">matrix_keypad.h</a>.</p>

</div>
</div>
<a id="gababd1b99c2dcbcf7a33116bf7dcd7e8b" name="gababd1b99c2dcbcf7a33116bf7dcd7e8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gababd1b99c2dcbcf7a33116bf7dcd7e8b">&#9670;&#160;</a></span>CONFIG_MATRIX_KEYPAD_NUM_ROWS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_MATRIX_KEYPAD_NUM_ROWS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of rows. </p>

<p class="definition">Definition at line <a class="el" href="matrix__keypad_8h_source.html#l00067">67</a> of file <a class="el" href="matrix__keypad_8h_source.html">matrix_keypad.h</a>.</p>

</div>
</div>
<a id="ga82a04ca5044662858728b189d175fa32" name="ga82a04ca5044662858728b189d175fa32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga82a04ca5044662858728b189d175fa32">&#9670;&#160;</a></span>CONFIG_MATRIX_KEYPAD_ROWS_USE_OPEN_DRAIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_MATRIX_KEYPAD_ROWS_USE_OPEN_DRAIN&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use open drain GPIO mode. </p>

<p class="definition">Definition at line <a class="el" href="matrix__keypad_8h_source.html#l00103">103</a> of file <a class="el" href="matrix__keypad_8h_source.html">matrix_keypad.h</a>.</p>

</div>
</div>
<a id="ga783555adfb1fb2680610ca6cc63234dc" name="ga783555adfb1fb2680610ca6cc63234dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga783555adfb1fb2680610ca6cc63234dc">&#9670;&#160;</a></span>MATRIX_KEYPAD_DEBOUNCE_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MATRIX_KEYPAD_DEBOUNCE_MASK&#160;&#160;&#160;    (<a class="el" href="#gaa80d44d3763dd8a85cb967ba068cf9f3">CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_BEGIN</a> | <a class="el" href="#gad309c53ba7a9448a298d87ba420f73dc">CONFIG_MATRIX_KEYPAD_DEBOUNCE_PATTERN_END</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debounce pattern mask. </p>

<p class="definition">Definition at line <a class="el" href="matrix__keypad_8h_source.html#l00118">118</a> of file <a class="el" href="matrix__keypad_8h_source.html">matrix_keypad.h</a>.</p>

</div>
</div>
<a id="gaa200a961debfdcfe7d6889127129530b" name="gaa200a961debfdcfe7d6889127129530b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa200a961debfdcfe7d6889127129530b">&#9670;&#160;</a></span>MATRIX_KEYPAD_ROWS_GPIO_MODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MATRIX_KEYPAD_ROWS_GPIO_MODE&#160;&#160;&#160;<a class="el" href="atxmega_2include_2periph__cpu_8h.html#a201df5e2845212d28c89e2cf3fdaa642a1b59f059dea546f0248fb26232ee3531">GPIO_OUT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPIO mode used for the row GPIOs. </p>

<p class="definition">Definition at line <a class="el" href="matrix__keypad_8h_source.html#l00112">112</a> of file <a class="el" href="matrix__keypad_8h_source.html">matrix_keypad.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga5feba9dc3d19cfcddc5b7191f8ad9008" name="ga5feba9dc3d19cfcddc5b7191f8ad9008"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5feba9dc3d19cfcddc5b7191f8ad9008">&#9670;&#160;</a></span>matrix_keypad_cb_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* matrix_keypad_cb_t) (void *arg, size_t row, size_t column, bool state)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback for key state changes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>callback context </td></tr>
    <tr><td class="paramname">row</td><td>Row that changed </td></tr>
    <tr><td class="paramname">column</td><td>Column that changed </td></tr>
    <tr><td class="paramname">state</td><td>New state of the key, 1 = pressed, 0 = released </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="matrix__keypad_8h_source.html#l00166">166</a> of file <a class="el" href="matrix__keypad_8h_source.html">matrix_keypad.h</a>.</p>

</div>
</div>
<a id="gab4a96502cc17f4a2d355273188f15492" name="gab4a96502cc17f4a2d355273188f15492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4a96502cc17f4a2d355273188f15492">&#9670;&#160;</a></span>matrix_keypad_state_row_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="#gab4a96502cc17f4a2d355273188f15492">matrix_keypad_state_row_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type definition for a full row (all columns) state, variable width depending on the number of columns. </p>

<p class="definition">Definition at line <a class="el" href="matrix__keypad_8h_source.html#l00126">126</a> of file <a class="el" href="matrix__keypad_8h_source.html">matrix_keypad.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad5541860cf1318cb91dee462d64f4590" name="gad5541860cf1318cb91dee462d64f4590"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad5541860cf1318cb91dee462d64f4590">&#9670;&#160;</a></span>matrix_keypad_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int matrix_keypad_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmatrix__keypad__t.html">matrix_keypad_t</a> *</td>          <td class="paramname"><span class="paramname"><em>dev</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmatrix__keypad__params__t.html">matrix_keypad_params_t</a> *</td>          <td class="paramname"><span class="paramname"><em>params</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga5feba9dc3d19cfcddc5b7191f8ad9008">matrix_keypad_cb_t</a></td>          <td class="paramname"><span class="paramname"><em>callback</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>arg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the given device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">dev</td><td>Device descriptor of the driver </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>Initialization parameters </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>Callback to call on state changes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Context argument for the callback</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd></dl>

</div>
</div>
<a id="gac6ca1b06c03bc385b2d0430a1dfdf49e" name="gac6ca1b06c03bc385b2d0430a1dfdf49e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6ca1b06c03bc385b2d0430a1dfdf49e">&#9670;&#160;</a></span>matrix_keypad_scan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t matrix_keypad_scan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmatrix__keypad__t.html">matrix_keypad_t</a> *</td>          <td class="paramname"><span class="paramname"><em>dev</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scan through the keypad matrix. </p>
<p>This updates the state of the device descriptor, calling <a class="el" href="#ga5feba9dc3d19cfcddc5b7191f8ad9008">matrix_keypad_cb_t</a> when a key press or release has been detected</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">dev</td><td>Device descriptor of the driver</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of keys that changed state </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->

    </div>
  </body>
</html>
