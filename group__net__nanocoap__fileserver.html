<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>CoAP file server</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.scrollTo.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
                <div class="navbar-form navbar-right" style="background-color: white;"></div>
              <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
              <script src="/pagefind/pagefind-ui.js"></script>
              <div id="search">
              </div>
                <script>
                  window.addEventListener('DOMContentLoaded', (event) => {
                      new PagefindUI({ element: "#search", showSubResults: true });
                  });
              </script>
              </div>
              </div>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__net__nanocoap__fileserver.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">CoAP file server<div class="ingroups"><a class="el" href="group__net.html">Networking</a> &raquo; <a class="el" href="group__net__nanocoap.html">nanoCoAP small CoAP library</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Library for serving files from the VFS to CoAP clients  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Library for serving files from the VFS to CoAP clients </p>
<h1><a class="anchor" id="autotoc_md2052"></a>
About</h1>
<p>This maps files in the local file system onto a resources in CoAP. In that, it is what is called a static web server in the unconstrained web.</p>
<p>As usual, GET operations are used to read files and PUT writes to files. In the current implementation, PUTs are expressed as random-access, meaning that files are not updated atomically, although files are created atomically. The Content-Format option is not checked in the current implementation. Conditional file modification and deletion is supported using the If-Match option. The If-Match option carries a previously received Etag or in case of zero length, requires a request to be processed only if the resource exists. In opposite, the If-None-Match option requires a request to be processed, only if the resource does not yet exist, and is most useful for file creation.</p>
<p>Directories are expressed to URIs with trailing slashes. Directories and their content are deleted as if one would do an <code>$rm -r</code>. If you only would like to delete a directory if it is empty, you must supply an If-Match option with the special value <a class="el" href="#ga6361921051a327323fed06922e0182fd">COAPFILESERVER_DIR_DELETE_ETAG</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The file server uses ETag for cache validation. The ETags are built from the file system stat values. As clients rely on the ETag to differ when the file changes, it is important that file modification times are set. The precise time values do not matter, but if a file is changed in place and neither its length nor its modification time is varied, then clients will not become aware of the change or may even mix up the versions half way through if they have a part of the old version cached.</dd></dl>
<h1><a class="anchor" id="autotoc_md2053"></a>
Usage</h1>
<ul>
<li><code>USEMODULE += nanocoap_fileserver</code></li>
<li><p class="startli">Enter a <a class="el" href="#ga91de066181db9756bf9f1a7bad973480">nanocoap_fileserver_handler</a> handler into your CoAP server's resource list like this:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_struct" href="structcoap__resource__t.html">coap_resource_t</a> _resources[] = {</div>
<div class="line">    ...</div>
<div class="line">    {</div>
<div class="line">       .path = <span class="stringliteral">&quot;/files/sd&quot;</span>,</div>
<div class="line">       .methods = COAP_GET | <a class="code hl_define" href="group__net__nanocoap.html#ga8c87dddfffd38c7c88c32b49fad9cb26">COAP_MATCH_SUBTREE</a>,</div>
<div class="line">       .handler = <a class="code hl_function" href="#ga91de066181db9756bf9f1a7bad973480">nanocoap_fileserver_handler</a>,</div>
<div class="line">       .context = <span class="stringliteral">&quot;/sd0&quot;</span></div>
<div class="line">    },</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="ttc" id="agroup__net__nanocoap__fileserver_html_ga91de066181db9756bf9f1a7bad973480"><div class="ttname"><a href="#ga91de066181db9756bf9f1a7bad973480">nanocoap_fileserver_handler</a></div><div class="ttdeci">ssize_t nanocoap_fileserver_handler(coap_pkt_t *pdu, uint8_t *buf, size_t len, coap_request_ctx_t *ctx)</div><div class="ttdoc">File server handler.</div></div>
<div class="ttc" id="agroup__net__nanocoap_html_ga8c87dddfffd38c7c88c32b49fad9cb26"><div class="ttname"><a href="group__net__nanocoap.html#ga8c87dddfffd38c7c88c32b49fad9cb26">COAP_MATCH_SUBTREE</a></div><div class="ttdeci">#define COAP_MATCH_SUBTREE</div><div class="ttdoc">Path is considered as a prefix when matching.</div><div class="ttdef"><b>Definition</b> <a href="nanocoap_8h_source.html#l00129">nanocoap.h:129</a></div></div>
<div class="ttc" id="astructcoap__resource__t_html"><div class="ttname"><a href="structcoap__resource__t.html">coap_resource_t</a></div><div class="ttdoc">Type for CoAP resource entry.</div><div class="ttdef"><b>Definition</b> <a href="nanocoap_8h_source.html#l00311">nanocoap.h:311</a></div></div>
</div><!-- fragment --><p class="startli">The path argument specifies under which path the folder is served via CoAP while the context argument contains the path on the local filesystem that will be served.</p>
<p class="startli">The allowed methods dictate whether it's read-only (<code>COAP_GET</code>) or read-write (<code>COAP_GET | COAP_PUT | COAP_DELETE</code>). If you want to support <code>PUT</code> and <code>DELETE</code>, you need to enable the modules <code>nanocoap_fileserver_put</code> and <code>nanocoap_fileserver_delete</code>. </p>
</li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fileserver_8h.html">fileserver.h</a></td></tr>
<tr class="memdesc:fileserver_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resource handler for the CoAP file system server. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnanocoap__fileserver__event__ctx__t.html">nanocoap_fileserver_event_ctx_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">GCoAP fileserver event context.  <a href="structnanocoap__fileserver__event__ctx__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga6361921051a327323fed06922e0182fd" id="r_ga6361921051a327323fed06922e0182fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6361921051a327323fed06922e0182fd">COAPFILESERVER_DIR_DELETE_ETAG</a>&#160;&#160;&#160;(0x6ce88b56u)</td></tr>
<tr class="memdesc:ga6361921051a327323fed06922e0182fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Randomly generated Etag, used by a client when a directory should only be deleted, if it is empty.  <br /></td></tr>
<tr class="separator:ga6361921051a327323fed06922e0182fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga212a3e5e439f0c9a9f80ac247bb6807e" id="r_ga212a3e5e439f0c9a9f80ac247bb6807e"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga212a3e5e439f0c9a9f80ac247bb6807e">nanocoap_fileserver_event_handler_t</a>) (<a class="el" href="#gaee86edf6c8a4db7d3f57fdebeef22316">nanocoap_fileserver_event_t</a> <a class="el" href="structevent.html">event</a>, <a class="el" href="structnanocoap__fileserver__event__ctx__t.html">nanocoap_fileserver_event_ctx_t</a> *ctx)</td></tr>
<tr class="memdesc:ga212a3e5e439f0c9a9f80ac247bb6807e"><td class="mdescLeft">&#160;</td><td class="mdescRight">GCoAP fileserver event callback type.  <br /></td></tr>
<tr class="separator:ga212a3e5e439f0c9a9f80ac247bb6807e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaee86edf6c8a4db7d3f57fdebeef22316" id="r_gaee86edf6c8a4db7d3f57fdebeef22316"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaee86edf6c8a4db7d3f57fdebeef22316">nanocoap_fileserver_event_t</a> { <br />
&#160;&#160;<a class="el" href="#ggaee86edf6c8a4db7d3f57fdebeef22316aa07b811f1a1d41b0e15d05f723ced1f9">NANOCOAP_FILESERVER_GET_FILE_START</a>
, <a class="el" href="#ggaee86edf6c8a4db7d3f57fdebeef22316aef78be231797f58bc42b8508dfe09e22">NANOCOAP_FILESERVER_GET_FILE_END</a>
, <a class="el" href="#ggaee86edf6c8a4db7d3f57fdebeef22316af1812c6bba32ba5b182428f459eca179">NANOCOAP_FILESERVER_PUT_FILE_START</a>
, <a class="el" href="#ggaee86edf6c8a4db7d3f57fdebeef22316ab2e4432bafd998152ab182666afdc9cd">NANOCOAP_FILESERVER_PUT_FILE_END</a>
, <br />
&#160;&#160;<a class="el" href="#ggaee86edf6c8a4db7d3f57fdebeef22316ad02f528ffa8149b1ee90b4c4d0c5423c">NANOCOAP_FILESERVER_DELETE_FILE</a>
<br />
 }</td></tr>
<tr class="memdesc:gaee86edf6c8a4db7d3f57fdebeef22316"><td class="mdescLeft">&#160;</td><td class="mdescRight">GCoAP fileserver event types.  <a href="#gaee86edf6c8a4db7d3f57fdebeef22316">More...</a><br /></td></tr>
<tr class="separator:gaee86edf6c8a4db7d3f57fdebeef22316"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gadcb19e6b5b0b0a4b641cfb848aff22c9" id="r_gadcb19e6b5b0b0a4b641cfb848aff22c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadcb19e6b5b0b0a4b641cfb848aff22c9">nanocoap_fileserver_set_event_cb</a> (<a class="el" href="#ga212a3e5e439f0c9a9f80ac247bb6807e">nanocoap_fileserver_event_handler_t</a> cb, void *arg)</td></tr>
<tr class="memdesc:gadcb19e6b5b0b0a4b641cfb848aff22c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a consumer for GCoAP fileserver events Requires the <code>nanocoap_fileserver_callback</code> module.  <br /></td></tr>
<tr class="separator:gadcb19e6b5b0b0a4b641cfb848aff22c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91de066181db9756bf9f1a7bad973480" id="r_ga91de066181db9756bf9f1a7bad973480"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga91de066181db9756bf9f1a7bad973480">nanocoap_fileserver_handler</a> (<a class="el" href="structcoap__pkt__t.html">coap_pkt_t</a> *pdu, uint8_t *buf, size_t len, <a class="el" href="group__net__nanocoap.html#gaedec79122f8968eb8b04e9e9360b392a">coap_request_ctx_t</a> *ctx)</td></tr>
<tr class="memdesc:ga91de066181db9756bf9f1a7bad973480"><td class="mdescLeft">&#160;</td><td class="mdescRight">File server handler.  <br /></td></tr>
<tr class="separator:ga91de066181db9756bf9f1a7bad973480"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga6361921051a327323fed06922e0182fd" name="ga6361921051a327323fed06922e0182fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6361921051a327323fed06922e0182fd">&#9670;&#160;</a></span>COAPFILESERVER_DIR_DELETE_ETAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COAPFILESERVER_DIR_DELETE_ETAG&#160;&#160;&#160;(0x6ce88b56u)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Randomly generated Etag, used by a client when a directory should only be deleted, if it is empty. </p>

<p class="definition">Definition at line <a class="el" href="fileserver_8h_source.html#l00091">91</a> of file <a class="el" href="fileserver_8h_source.html">fileserver.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga212a3e5e439f0c9a9f80ac247bb6807e" name="ga212a3e5e439f0c9a9f80ac247bb6807e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga212a3e5e439f0c9a9f80ac247bb6807e">&#9670;&#160;</a></span>nanocoap_fileserver_event_handler_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* nanocoap_fileserver_event_handler_t) (<a class="el" href="#gaee86edf6c8a4db7d3f57fdebeef22316">nanocoap_fileserver_event_t</a> <a class="el" href="structevent.html">event</a>, <a class="el" href="structnanocoap__fileserver__event__ctx__t.html">nanocoap_fileserver_event_ctx_t</a> *ctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GCoAP fileserver event callback type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>Type of the event </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>Event context information </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fileserver_8h_source.html#l00122">122</a> of file <a class="el" href="fileserver_8h_source.html">fileserver.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gaee86edf6c8a4db7d3f57fdebeef22316" name="gaee86edf6c8a4db7d3f57fdebeef22316"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaee86edf6c8a4db7d3f57fdebeef22316">&#9670;&#160;</a></span>nanocoap_fileserver_event_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gaee86edf6c8a4db7d3f57fdebeef22316">nanocoap_fileserver_event_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GCoAP fileserver event types. </p>
<dl class="section note"><dt>Note</dt><dd>This requires the nanocoap_fileserver_callback module. </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaee86edf6c8a4db7d3f57fdebeef22316aa07b811f1a1d41b0e15d05f723ced1f9" name="ggaee86edf6c8a4db7d3f57fdebeef22316aa07b811f1a1d41b0e15d05f723ced1f9"></a>NANOCOAP_FILESERVER_GET_FILE_START&#160;</td><td class="fielddoc"><p>file download started <br  />
 </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaee86edf6c8a4db7d3f57fdebeef22316aef78be231797f58bc42b8508dfe09e22" name="ggaee86edf6c8a4db7d3f57fdebeef22316aef78be231797f58bc42b8508dfe09e22"></a>NANOCOAP_FILESERVER_GET_FILE_END&#160;</td><td class="fielddoc"><p>file download finished <br  />
 </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaee86edf6c8a4db7d3f57fdebeef22316af1812c6bba32ba5b182428f459eca179" name="ggaee86edf6c8a4db7d3f57fdebeef22316af1812c6bba32ba5b182428f459eca179"></a>NANOCOAP_FILESERVER_PUT_FILE_START&#160;</td><td class="fielddoc"><p>file upload started <br  />
 </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaee86edf6c8a4db7d3f57fdebeef22316ab2e4432bafd998152ab182666afdc9cd" name="ggaee86edf6c8a4db7d3f57fdebeef22316ab2e4432bafd998152ab182666afdc9cd"></a>NANOCOAP_FILESERVER_PUT_FILE_END&#160;</td><td class="fielddoc"><p>file upload finished <br  />
 </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaee86edf6c8a4db7d3f57fdebeef22316ad02f528ffa8149b1ee90b4c4d0c5423c" name="ggaee86edf6c8a4db7d3f57fdebeef22316ad02f528ffa8149b1ee90b4c4d0c5423c"></a>NANOCOAP_FILESERVER_DELETE_FILE&#160;</td><td class="fielddoc"><p>file deletion requested (called before file is deleted) </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="fileserver_8h_source.html#l00098">98</a> of file <a class="el" href="fileserver_8h_source.html">fileserver.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga91de066181db9756bf9f1a7bad973480" name="ga91de066181db9756bf9f1a7bad973480"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga91de066181db9756bf9f1a7bad973480">&#9670;&#160;</a></span>nanocoap_fileserver_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t nanocoap_fileserver_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcoap__pkt__t.html">coap_pkt_t</a> *</td>          <td class="paramname"><span class="paramname"><em>pdu</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__net__nanocoap.html#gaedec79122f8968eb8b04e9e9360b392a">coap_request_ctx_t</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>File server handler. </p>
<p>Serve a directory from the VFS as a CoAP resource tree. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__net__nanocoap__fileserver.html" title="Library for serving files from the VFS to CoAP clients">CoAP file server</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pdu</td><td>CoAP request package </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Buffer for the response </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Response buffer length </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>pointer to a <a class="el" href="group__net__nanocoap.html#gaedec79122f8968eb8b04e9e9360b392a">coap_request_ctx_t</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of the response on success negative error </dd></dl>

</div>
</div>
<a id="gadcb19e6b5b0b0a4b641cfb848aff22c9" name="gadcb19e6b5b0b0a4b641cfb848aff22c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadcb19e6b5b0b0a4b641cfb848aff22c9">&#9670;&#160;</a></span>nanocoap_fileserver_set_event_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nanocoap_fileserver_set_event_cb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#ga212a3e5e439f0c9a9f80ac247bb6807e">nanocoap_fileserver_event_handler_t</a></td>          <td class="paramname"><span class="paramname"><em>cb</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>arg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a consumer for GCoAP fileserver events Requires the <code>nanocoap_fileserver_callback</code> module. </p>
<p>The Callback is called on each fileserver event and executed within the GCoAP thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>The callback function to be called on events </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Custom callback function context </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Mon Sep 23 2024 14:49:33 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.12.0</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
