<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>MSB-430</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.scrollTo.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
                <div class="navbar-form navbar-right" style="background-color: white;"></div>
              <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
              <script src="/pagefind/pagefind-ui.js"></script>
              <div id="search">
              </div>
                <script>
                  window.addEventListener('DOMContentLoaded', (event) => {
                      new PagefindUI({ element: "#search", showSubResults: true });
                  });
              </script>
              </div>
              </div>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__boards__msb430.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a>  </div>
  <div class="headertitle"><div class="title">MSB-430<div class="ingroups"><a class="el" href="group__boards.html">Boards</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Support for the ScatterWeb Modular Sensor Board 430  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Support for the ScatterWeb Modular Sensor Board 430 </p>
<p><img src="https://www.mi.fu-berlin.de/inf/groups/ag-tech/projects/ScatterWeb/modules/mod_MSB-430.html" alt="Photo of the Modular Sensor Board 430" style="width: 512px; max-width: 100%;" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md552"></a>
MCU</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">MCU   </th><th class="markdownTableHeadLeft">TI MSP430F1612    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Family   </td><td class="markdownTableBodyLeft">MSP430    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vendor   </td><td class="markdownTableBodyLeft">Texas Instruments    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Package   </td><td class="markdownTableBodyLeft">64 QFN    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">RAM   </td><td class="markdownTableBodyLeft">5 KiB    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Flash   </td><td class="markdownTableBodyLeft">55 KiB    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Frequency   </td><td class="markdownTableBodyLeft">up to 8 MHz    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">FPU   </td><td class="markdownTableBodyLeft">no    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Timers   </td><td class="markdownTableBodyLeft">2 (2x 16bit)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ADCs   </td><td class="markdownTableBodyLeft">1x 8 channel 12-bit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">UARTs   </td><td class="markdownTableBodyLeft">2 (*)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SPIs   </td><td class="markdownTableBodyLeft">2 (*)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">I2Cs   </td><td class="markdownTableBodyLeft">1 (*)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Vcc   </td><td class="markdownTableBodyLeft">1.8 V - 3.6 V (battery holder board provides 3.0 V)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Datasheet MCU   </td><td class="markdownTableBodyLeft"><a href="https://www.ti.com/lit/ds/symlink/msp430f1612.pdf">Datasheet</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">User Guide MCU   </td><td class="markdownTableBodyLeft"><a href="https://www.ti.com/lit/ug/slau049f/slau049f.pdf">User Guide</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Website   </td><td class="markdownTableBodyLeft"><a href="https://www.mi.fu-berlin.de/inf/groups/ag-tech/projects/ScatterWeb/modules/mod_MSB-430.html">MSB-430</a>   </td></tr>
</table>
<dl class="section warning"><dt>Warning</dt><dd>While programming, the minimum supply voltage is 2.7 V instead of 1.8 V. </dd>
<dd>
When the supply voltage supervisor (SVS) (a.k.a. brownout detection) is used, the supply voltage must initially be at least 2.0 V due to the hysteresis of the SVS circuitry. Afterwards the MCU remains operational with VCC &gt;= 1.8 V. </dd>
<dd>
The MSP430F1612 has two USARTS, which can be configured as UART, SPI, or (only in case of USART0) as I2C bus. Each USART can only provide one serial interface at a time; time sharing is theoretically possible but not yet implemented.</dd></dl>
<h2><a class="anchor" id="autotoc_md553"></a>
Schematics</h2>
<p><img src="https://www.mi.fu-berlin.de/inf/groups/ag-tech/projects/ScatterWeb/pic/blueprints/MSB430_s1.png" alt="Schematics of the MSB-430 (Part 1 / 2)" style="width: 978px; max-width: 100%;" class="inline"/></p>
<p><img src="https://www.mi.fu-berlin.de/inf/groups/ag-tech/projects/ScatterWeb/pic/blueprints/MSB430_s2.png" alt="Schematics of the MSB-430 (Part 2 / 2)" style="width: 1368px; max-width: 100%;" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md554"></a>
Hardware Limitations</h3>
<p>The GPIOs on the MSP430F1612 only have two MUX settings: Being used as digital input/output or routed to a peripheral. The MCU has two universal serial synchronous/asynchronous communication interfaces (USARTs), which can be used to provide either an UART, an SPI, or (only in case of USART0) an I2C bus. Every USART signal is available at exactly one GPIO pin.</p>
<p>The UART exposed via the battery holder board (P3.6 and P3.7) can only be provided via USART1. In order to support asynchronous reception (e.g. to allow interaction via the shell), USART1 needs to be continuously configured as UART and cannot be used to provide an SPI bus.</p>
<p>The SPI bus connected to the SD card socket (P5.1, P5.2, and P5.3) can only be provided via USART1. Hence, it is not possible to use SPI bus connected to the SD card socket while the UART used for <code>stdio</code> is in use, as they use the same USART. They could be used at the same time, if module <code>stdin</code> is not used (the UART is output only). However, sharing USARTs is not yet implemented.</p>
<p>The SPI bus of the CC1020 transceiver (used for configuration only) is connected to pins P2.0, P2.1, and P2.3. Those pins are not connected to either USART, so no hardware SPI can be used to interact with the transceiver. However, the SPI is only used for configuration and control of the transceiver, so using a slow bit-banging SPI bus won't affect the performance of the transceiver, other than for quick power down after transmission or channel hopping. A second two wire serial interface (not I2C or compatible) is used to feed data into the CC1020 or read data from the CC1020. The serial clock is driven by the transceiver and the MCU needs to keep up with providing the frames to send bit by bit. Unlike modern transceivers, the CC1020 has no frame buffer and the MCU needs to control the transmission and reception on the bit level.</p>
<h2><a class="anchor" id="autotoc_md555"></a>
Pinout</h2>
<h3><a class="anchor" id="autotoc_md556"></a>
Pinout of the Main MSB 430 Board</h3>
<p><img src="https://www.mi.fu-berlin.de/inf/groups/ag-tech/projects/ScatterWeb/pic/blueprints/MSB430_b.png" alt="Pinout of the MSB-430" style="width: 423px; max-width: 100%;" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md557"></a>
Pinout of the Battery Holder Board</h3>
<p>The pins above the JTAG header with the pin closest to the power supply switch being denoted as Pin 1, the signals are as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Pin   </th><th class="markdownTableHeadRight">1   </th><th class="markdownTableHeadRight">2   </th><th class="markdownTableHeadRight">3   </th><th class="markdownTableHeadRight">4   </th><th class="markdownTableHeadRight">5   </th><th class="markdownTableHeadRight">6    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Signal   </td><td class="markdownTableBodyRight">GND   </td><td class="markdownTableBodyRight">NC   </td><td class="markdownTableBodyRight">5V   </td><td class="markdownTableBodyRight">RXD   </td><td class="markdownTableBodyRight">TXD   </td><td class="markdownTableBodyRight">NC   </td></tr>
</table>
<p>The battery holder board contains a 3V power regular that powers the MSB-430 board via 3V pin (pin 1 on JP2). The switch at the bottom can be used to select the input voltage of that power regulator: If the switch is in the position towards the daughter board, it will use the 5V pin of the header above the JTAG header as power supply, otherwise the batteries are used as power supply.</p>
<h2><a class="anchor" id="autotoc_md558"></a>
Flashing RIOT</h2>
<p>Place the MSB-430 board into the batter holder board with the SD card socket facing towards the battery holder board and the (likely unpopulated) antenna connector facing away from the switch and JTAG-connector of the battery holder board. (As shown in the picture at the top of the page.)</p>
<p>Afterwards, connect a JTAG debugger supported by <a href="https://dlbeer.co.nz/mspdebug/">mspdebug</a>; by default the Olimex MSP430-JTAG-Tiny is assumed, which is among the less expensive options.</p>
<dl class="section note"><dt>Note</dt><dd>If you are not using the Olimex MSP430-JTAG-Tiny (or a compatible programmer), set <code>MSPDEBUG_PROGRAMMER</code> to the correct value via an environment variable or as parameter to make. E.g. use <code>make BOARD=msb-430 MSPDEBUG_PROGRAMMER=bus-pirate</code> to flash using the bus pirate. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>It is recommended to use the external power supply via the 5V pin instead of the battery while flashing.</dd></dl>
<p>Once the board is firmly connected in the battery holder and the JTAG cable is connected, just run</p>
<div class="fragment"><div class="line">make BOARD=msb-430 flash</div>
</div><!-- fragment --><p>in the application's directory.</p>
<h2><a class="anchor" id="autotoc_md559"></a>
Using the shell</h2>
<p>stdio is available via the UART interface with <code>RXD = P3.7</code> (pin 35 on the header) and <code>TXD = P3.6</code> (pin 34 on the header) at 115,200 Baud.</p>
<p>The easiest way is to connect an USB TTL adapter (such as the cheap <code>cp210x</code> or <code>ch341</code> based adapters) to the battery holder board as follows:</p>
<div class="fragment"><div class="line">TTL adapter    MSB-430 Battery Holder Board</div>
<div class="line">-----------    ----------------------------</div>
<div class="line"> </div>
<div class="line">       GND --- 1 (GND)</div>
<div class="line">       TXD --- 4 (RXD / <a class="code hl_enumvalue" href="msp430_2include_2periph__cpu__common_8h.html#adbaf9202177df73e6880eab6e6aab329a80fa734694e17b1a1e8f1173b853057f">P3</a>.7)</div>
<div class="line">       RXD --- 5 (TXD / <a class="code hl_enumvalue" href="msp430_2include_2periph__cpu__common_8h.html#adbaf9202177df73e6880eab6e6aab329a80fa734694e17b1a1e8f1173b853057f">P3</a>.6)</div>
<div class="line">       5V  --- 3 (5V)</div>
<div class="ttc" id="amsp430_2include_2periph__cpu__common_8h_html_adbaf9202177df73e6880eab6e6aab329a80fa734694e17b1a1e8f1173b853057f"><div class="ttname"><a href="msp430_2include_2periph__cpu__common_8h.html#adbaf9202177df73e6880eab6e6aab329a80fa734694e17b1a1e8f1173b853057f">P3</a></div><div class="ttdeci">@ P3</div><div class="ttdoc">PORT 3.</div><div class="ttdef"><b>Definition</b> <a href="msp430_2include_2periph__cpu__common_8h_source.html#l00093">periph_cpu_common.h:93</a></div></div>
</div><!-- fragment --> <table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msb-430_2include_2board_8h.html">board.h</a></td></tr>
<tr class="memdesc:msb-430_2include_2board_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Central definitions for the ScatterWeb MSB-430 board. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="boards_2msb-430_2include_2periph__conf_8h.html">periph_conf.h</a></td></tr>
<tr class="memdesc:boards_2msb-430_2include_2periph__conf_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">MSB-430 peripheral configuration. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Mon Sep 23 2024 14:49:34 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.12.0</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
