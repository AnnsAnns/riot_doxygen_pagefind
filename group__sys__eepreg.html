<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIOT OS: EEPROM registration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="jquery.js"></script> -->
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<!-- <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> -->
<script src="/pagefind/pagefind-ui.js"></script>
<script>
  // Check whether the PagefindUI class is available
  if (typeof PagefindUI === 'undefined') {
    console.error('PagefindUI class is not available | Dev Build');
  } else {
    // // Remove the "searchstub" element and initialize the PagefindUI class
    // document.getElementById("#searchstub").remove();
    // Initialize the PagefindUI class with the element id "search"
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
  }
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="global.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <script>
    // Print the data within the NAVTREE variable from the navtreedata.js file
    var navtree = NAVTREE;
    console.log(navtree);
  </script>
<div class="flex flex-row gap-4 w-screen font-sans text-lg max-h-screen overscroll-contain justify-items-stretch bg-neutral-900">
  <!--Sidebar-->
  <div data-pagefind-ignore="all" class="w-1/3 max-w-md flex-auto h-screen bg-neutral-800 ring-2 ring-neutral-700 shadow-neutral-800 shadow-2xl rounded-xl p-3 ml-1 my-2 mr-3 flex flex-col justify-around">
    <div id="top" class="justify-self-center content-center items-center place-content-center">
      <img alt="Logo" src="riot-logo.svg"/>
      <div id="projectbrief">
        The friendly Operating System for the Internet of Things
      </div>
    </div>
    <div id="search" class="place-content-center" class="overflow-y-scroll max-h-64 bg-slate-400 ring-2 ring-white text-white" >
      <h1>Searchbar via Pagefind</h1>
      <!-- <div id="searchstub" class="flex items-center border border-gray-300 rounded-lg p-2 shadow-sm">
        <input type="text" placeholder="Search is only available in Production Build ..." class="flex-grow p-2 outline-none">
      </div> -->
    </div>
    <div id="navtree">
      <script>
        // The navtree variable is always a pair of two elements (key, value)
        // The key is the name we should display and the value is the link to the page
        // Generate the navtree from the navtreedata.js file and put it under the navtree div
        var navtree = NAVTREE[0][2];
        var navtreeHTML = "<h1>Navigation based on Doxygen</h1> <ul>";
        for (var i = 0; i < navtree.length; i++) {
          navtreeHTML += "<li><a href='" + navtree[i][1] + "'>" + navtree[i][0] + "</a></li>";
          if (i == 5) {
            navtreeHTML += '<li><h3 class="ring-2 ring-white"> Random Insert for Demonstration </h3></li>';
          }
        }
        navtreeHTML += "</ul>";
        document.getElementById("navtree").innerHTML = navtreeHTML;
      </script>
    </div>
    <ul>
      <li class="footer">
        Generated on Tue Sep 24 2024 11:16:26 by 
          <a href="http://www.doxygen.org/index.html">
            Doxygen
          </a> 
        1.12.0
      </li>
    </ul>
  </div>
  <!--Main Content-->
  <div class="hidden">
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__sys__eepreg.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">EEPROM registration<div class="ingroups"><a class="el" href="group__sys.html">System</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>eepreg provides a facility to easily manage the locations of data stored in EEPROM via a meta-data registry.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>eepreg provides a facility to easily manage the locations of data stored in EEPROM via a meta-data registry. </p>
<p>The structure of the meta-data registry is intended to make it easy to detect the exact layout of existent data so that automatic tools may be written to migrate legacy data to new formats. It also allows the addition and removal of new entries dynamically.</p>
<dl class="section note"><dt>Note</dt><dd>Names are used as identifiers and must be unique! It is also recommended to keep them as short as possible (while still being unique and human readable), as many systems have very small amounts of EEPROM. Disemvowelment can shorten long names while still retaining readability.</dd></dl>
<div class="fragment"><div class="line">The layout of the EEPROM used looks like this:</div>
<div class="line">   EEPROM_RESERV_CPU_LOW</div>
<div class="line">   EEPROM_RESERV_BOARD_LOW</div>
<div class="line">   Registry magic number (&quot;RIOTREG&quot;)</div>
<div class="line">   Registry end pointer</div>
<div class="line">   Registry entry 1 meta-data length (1 byte)</div>
<div class="line">   Registry entry 1 name (unterminated)</div>
<div class="line">   Registry entry 1 data pointer</div>
<div class="line">   Registry entry 2 meta-data length</div>
<div class="line">   Registry entry 2 name</div>
<div class="line">   Registry entry 2 data pointer</div>
<div class="line">   ... (new registry meta-data may be added in ascending order)</div>
<div class="line">   unused space</div>
<div class="line">   ... (new data locations may be added in descending order)</div>
<div class="line">   Entry 2 data</div>
<div class="line">   Entry 1 data</div>
<div class="line">   EEPROM_RESERV_BOARD_HI</div>
<div class="line">   EEPROM_RESERV_CPU_HI</div>
</div><!-- fragment --><p>Pointer length is dependent on the size of the available EEPROM (see EEPREG_PTR_LEN below). </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eepreg_8h.html">eepreg.h</a></td></tr>
<tr class="memdesc:eepreg_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">eepreg interface definitions <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga63bb256101fa9e77509f6c7f55e18171" id="r_ga63bb256101fa9e77509f6c7f55e18171"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga63bb256101fa9e77509f6c7f55e18171">EEPROM_RESERV_CPU_LOW</a>&#160;&#160;&#160;(0U)</td></tr>
<tr class="memdesc:ga63bb256101fa9e77509f6c7f55e18171"><td class="mdescLeft">&#160;</td><td class="mdescRight">EEPROM reserved near beginning for use by CPU and related.  <br /></td></tr>
<tr class="separator:ga63bb256101fa9e77509f6c7f55e18171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga589effdf337618045b68fbbee07e7427" id="r_ga589effdf337618045b68fbbee07e7427"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga589effdf337618045b68fbbee07e7427">EEPROM_RESERV_CPU_HI</a>&#160;&#160;&#160;(0U)</td></tr>
<tr class="memdesc:ga589effdf337618045b68fbbee07e7427"><td class="mdescLeft">&#160;</td><td class="mdescRight">EEPROM reserved near end for use by CPU and related.  <br /></td></tr>
<tr class="separator:ga589effdf337618045b68fbbee07e7427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad9b4c48f192c65ee6336d4fb7ddcc21f" id="r_gad9b4c48f192c65ee6336d4fb7ddcc21f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad9b4c48f192c65ee6336d4fb7ddcc21f">EEPROM_RESERV_BOARD_LOW</a>&#160;&#160;&#160;(0U)</td></tr>
<tr class="memdesc:gad9b4c48f192c65ee6336d4fb7ddcc21f"><td class="mdescLeft">&#160;</td><td class="mdescRight">EEPROM reserved near beginning for use by board and related.  <br /></td></tr>
<tr class="separator:gad9b4c48f192c65ee6336d4fb7ddcc21f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa75bb392911c28e5e1d9a7fa25c19eca" id="r_gaa75bb392911c28e5e1d9a7fa25c19eca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa75bb392911c28e5e1d9a7fa25c19eca">EEPROM_RESERV_BOARD_HI</a>&#160;&#160;&#160;(0U)</td></tr>
<tr class="memdesc:gaa75bb392911c28e5e1d9a7fa25c19eca"><td class="mdescLeft">&#160;</td><td class="mdescRight">EEPROM reserved near end for use by board and related.  <br /></td></tr>
<tr class="separator:gaa75bb392911c28e5e1d9a7fa25c19eca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0fdced4506a72c09f58cdf45abe93daa" id="r_ga0fdced4506a72c09f58cdf45abe93daa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0fdced4506a72c09f58cdf45abe93daa">EEPREG_PTR_LEN</a>&#160;&#160;&#160;(1U)</td></tr>
<tr class="memdesc:ga0fdced4506a72c09f58cdf45abe93daa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size in bytes of pointer meta-data in EEPROM.  <br /></td></tr>
<tr class="separator:ga0fdced4506a72c09f58cdf45abe93daa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gab289846ef3f21ee15e71e65c7bbece82" id="r_gab289846ef3f21ee15e71e65c7bbece82"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab289846ef3f21ee15e71e65c7bbece82">eepreg_iter_cb_t</a>) (char *name, void *arg)</td></tr>
<tr class="memdesc:gab289846ef3f21ee15e71e65c7bbece82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signature of callback for iterating over entries in EEPROM registry.  <br /></td></tr>
<tr class="separator:gab289846ef3f21ee15e71e65c7bbece82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8386f5e817d99fa79e0dda1eec21a2bc" id="r_ga8386f5e817d99fa79e0dda1eec21a2bc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8386f5e817d99fa79e0dda1eec21a2bc">eepreg_add</a> (uint32_t *pos, const char *name, uint32_t len)</td></tr>
<tr class="memdesc:ga8386f5e817d99fa79e0dda1eec21a2bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load or write meta-data in EEPROM registry.  <br /></td></tr>
<tr class="separator:ga8386f5e817d99fa79e0dda1eec21a2bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cc01fd112cc905284c7c042ffa960e5" id="r_ga2cc01fd112cc905284c7c042ffa960e5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2cc01fd112cc905284c7c042ffa960e5">eepreg_read</a> (uint32_t *pos, const char *name)</td></tr>
<tr class="memdesc:ga2cc01fd112cc905284c7c042ffa960e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read position meta-data from EEPROM registry.  <br /></td></tr>
<tr class="separator:ga2cc01fd112cc905284c7c042ffa960e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacdab9c188e7a2acab1e856bde50dada1" id="r_gacdab9c188e7a2acab1e856bde50dada1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacdab9c188e7a2acab1e856bde50dada1">eepreg_write</a> (uint32_t *pos, const char *name, uint32_t len)</td></tr>
<tr class="memdesc:gacdab9c188e7a2acab1e856bde50dada1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write meta-data to EEPROM registry.  <br /></td></tr>
<tr class="separator:gacdab9c188e7a2acab1e856bde50dada1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03a4041c60ceeae39c1a0c1920829625" id="r_ga03a4041c60ceeae39c1a0c1920829625"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga03a4041c60ceeae39c1a0c1920829625">eepreg_rm</a> (const char *name)</td></tr>
<tr class="memdesc:ga03a4041c60ceeae39c1a0c1920829625"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove entry from EEPROM registry and free space.  <br /></td></tr>
<tr class="separator:ga03a4041c60ceeae39c1a0c1920829625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea6f1cbfd9d0313460f95174a7211586" id="r_gaea6f1cbfd9d0313460f95174a7211586"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaea6f1cbfd9d0313460f95174a7211586">eepreg_iter</a> (<a class="el" href="#gab289846ef3f21ee15e71e65c7bbece82">eepreg_iter_cb_t</a> cb, void *arg)</td></tr>
<tr class="memdesc:gaea6f1cbfd9d0313460f95174a7211586"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate over meta-data entries in EEPROM registry.  <br /></td></tr>
<tr class="separator:gaea6f1cbfd9d0313460f95174a7211586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabac1fc1aa39794180aa2c74a05542cb8" id="r_gabac1fc1aa39794180aa2c74a05542cb8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabac1fc1aa39794180aa2c74a05542cb8">eepreg_check</a> (void)</td></tr>
<tr class="memdesc:gabac1fc1aa39794180aa2c74a05542cb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for the presence of meta-data registry.  <br /></td></tr>
<tr class="separator:gabac1fc1aa39794180aa2c74a05542cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga824712fcd738078172386b1219fec5e7" id="r_ga824712fcd738078172386b1219fec5e7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga824712fcd738078172386b1219fec5e7">eepreg_reset</a> (void)</td></tr>
<tr class="memdesc:ga824712fcd738078172386b1219fec5e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear existing meta-data registry.  <br /></td></tr>
<tr class="separator:ga824712fcd738078172386b1219fec5e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga620ef74b27d473d3de03e7628ae8b4ed" id="r_ga620ef74b27d473d3de03e7628ae8b4ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga620ef74b27d473d3de03e7628ae8b4ed">eepreg_len</a> (uint32_t *len, const char *name)</td></tr>
<tr class="memdesc:ga620ef74b27d473d3de03e7628ae8b4ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate data length from meta-data in EEPROM registry.  <br /></td></tr>
<tr class="separator:ga620ef74b27d473d3de03e7628ae8b4ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae245361c595f9a2e8ae3db594291abb3" id="r_gae245361c595f9a2e8ae3db594291abb3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae245361c595f9a2e8ae3db594291abb3">eepreg_free</a> (uint32_t *len)</td></tr>
<tr class="memdesc:gae245361c595f9a2e8ae3db594291abb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate length of remaining EEPROM free space.  <br /></td></tr>
<tr class="separator:gae245361c595f9a2e8ae3db594291abb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga0fdced4506a72c09f58cdf45abe93daa" name="ga0fdced4506a72c09f58cdf45abe93daa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0fdced4506a72c09f58cdf45abe93daa">&#9670;&#160;</a></span>EEPREG_PTR_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPREG_PTR_LEN&#160;&#160;&#160;(1U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size in bytes of pointer meta-data in EEPROM. </p>

<p class="definition">Definition at line <a class="el" href="eepreg_8h_source.html#l00115">115</a> of file <a class="el" href="eepreg_8h_source.html">eepreg.h</a>.</p>

</div>
</div>
<a id="gaa75bb392911c28e5e1d9a7fa25c19eca" name="gaa75bb392911c28e5e1d9a7fa25c19eca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa75bb392911c28e5e1d9a7fa25c19eca">&#9670;&#160;</a></span>EEPROM_RESERV_BOARD_HI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_RESERV_BOARD_HI&#160;&#160;&#160;(0U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EEPROM reserved near end for use by board and related. </p>
<p>Change with care, as it may make existing data difficult to migrate </p>

<p class="definition">Definition at line <a class="el" href="eepreg_8h_source.html#l00102">102</a> of file <a class="el" href="eepreg_8h_source.html">eepreg.h</a>.</p>

</div>
</div>
<a id="gad9b4c48f192c65ee6336d4fb7ddcc21f" name="gad9b4c48f192c65ee6336d4fb7ddcc21f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad9b4c48f192c65ee6336d4fb7ddcc21f">&#9670;&#160;</a></span>EEPROM_RESERV_BOARD_LOW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_RESERV_BOARD_LOW&#160;&#160;&#160;(0U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EEPROM reserved near beginning for use by board and related. </p>
<p>Change with care, as it may make existing data difficult to migrate </p>

<p class="definition">Definition at line <a class="el" href="eepreg_8h_source.html#l00093">93</a> of file <a class="el" href="eepreg_8h_source.html">eepreg.h</a>.</p>

</div>
</div>
<a id="ga589effdf337618045b68fbbee07e7427" name="ga589effdf337618045b68fbbee07e7427"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga589effdf337618045b68fbbee07e7427">&#9670;&#160;</a></span>EEPROM_RESERV_CPU_HI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_RESERV_CPU_HI&#160;&#160;&#160;(0U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EEPROM reserved near end for use by CPU and related. </p>
<p>Change with care, as it may make existing data difficult to migrate </p>

<p class="definition">Definition at line <a class="el" href="eepreg_8h_source.html#l00084">84</a> of file <a class="el" href="eepreg_8h_source.html">eepreg.h</a>.</p>

</div>
</div>
<a id="ga63bb256101fa9e77509f6c7f55e18171" name="ga63bb256101fa9e77509f6c7f55e18171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga63bb256101fa9e77509f6c7f55e18171">&#9670;&#160;</a></span>EEPROM_RESERV_CPU_LOW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_RESERV_CPU_LOW&#160;&#160;&#160;(0U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EEPROM reserved near beginning for use by CPU and related. </p>
<p>Change with care, as it may make existing data difficult to migrate </p>

<p class="definition">Definition at line <a class="el" href="eepreg_8h_source.html#l00075">75</a> of file <a class="el" href="eepreg_8h_source.html">eepreg.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gab289846ef3f21ee15e71e65c7bbece82" name="gab289846ef3f21ee15e71e65c7bbece82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab289846ef3f21ee15e71e65c7bbece82">&#9670;&#160;</a></span>eepreg_iter_cb_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* eepreg_iter_cb_t) (char *name, void *arg)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signature of callback for iterating over entries in EEPROM registry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>name of an entry in the registry </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>argument for cb</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
&lt; 0 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="eepreg_8h_source.html#l00127">127</a> of file <a class="el" href="eepreg_8h_source.html">eepreg.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8386f5e817d99fa79e0dda1eec21a2bc" name="ga8386f5e817d99fa79e0dda1eec21a2bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8386f5e817d99fa79e0dda1eec21a2bc">&#9670;&#160;</a></span>eepreg_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eepreg_add </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>pos</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load or write meta-data in EEPROM registry. </p>
<p>This checks to see if relevant meta-data exists in the EEPROM registry, and returns that data position if it exists. If an entry does not exist in the registry, meta-data is written and allocated data space if there is enough remaining. Requesting a different length for an existent entry returns an error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pos</td><td>pointer to position variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>name of entry to load or write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>requested amount of data storage</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-EIO on EEPROM I/O error </dd>
<dd>
-ENOSPC on insufficient EEPROM for entry </dd>
<dd>
-EADDRINUSE on existing entry with different length </dd></dl>

</div>
</div>
<a id="gabac1fc1aa39794180aa2c74a05542cb8" name="gabac1fc1aa39794180aa2c74a05542cb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabac1fc1aa39794180aa2c74a05542cb8">&#9670;&#160;</a></span>eepreg_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eepreg_check </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check for the presence of meta-data registry. </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-EIO on EEPROM I/O error </dd>
<dd>
-ENOENT on non-existent registry </dd></dl>

</div>
</div>
<a id="gae245361c595f9a2e8ae3db594291abb3" name="gae245361c595f9a2e8ae3db594291abb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae245361c595f9a2e8ae3db594291abb3">&#9670;&#160;</a></span>eepreg_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eepreg_free </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>len</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate length of remaining EEPROM free space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">len</td><td>pointer to length variable</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-EIO on EEPROM I/O error </dd>
<dd>
-ENOENT on non-existent registry </dd></dl>

</div>
</div>
<a id="gaea6f1cbfd9d0313460f95174a7211586" name="gaea6f1cbfd9d0313460f95174a7211586"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea6f1cbfd9d0313460f95174a7211586">&#9670;&#160;</a></span>eepreg_iter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eepreg_iter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#gab289846ef3f21ee15e71e65c7bbece82">eepreg_iter_cb_t</a></td>          <td class="paramname"><span class="paramname"><em>cb</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>arg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate over meta-data entries in EEPROM registry. </p>
<p>This executes a callback over each name in the EEPROM registry. The intended work-flow for migration is to: iterate over each entry, check to see if migration is needed, duplicate using eepreg_write if needed, migrate data to duplicate entry, then delete old entry using eepreg_rm.</p>
<dl class="section note"><dt>Note</dt><dd>It is safe for the callback to remove the entry it is called with, or to add new entries.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>callback to iterate over entries </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>argument for cb</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-EIO on EEPROM I/O error </dd>
<dd>
-ENOENT on non-existent registry </dd>
<dd>
return value of cb when cb returns &lt; 0 </dd></dl>

</div>
</div>
<a id="ga620ef74b27d473d3de03e7628ae8b4ed" name="ga620ef74b27d473d3de03e7628ae8b4ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga620ef74b27d473d3de03e7628ae8b4ed">&#9670;&#160;</a></span>eepreg_len()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eepreg_len </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate data length from meta-data in EEPROM registry. </p>
<dl class="section note"><dt>Note</dt><dd>This information is typically already available to code that has called eepreg_add.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">len</td><td>pointer to length variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>name of entry to load or write</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-EIO on EEPROM I/O error </dd>
<dd>
-ENOENT on non-existent registry or entry </dd></dl>

</div>
</div>
<a id="ga2cc01fd112cc905284c7c042ffa960e5" name="ga2cc01fd112cc905284c7c042ffa960e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cc01fd112cc905284c7c042ffa960e5">&#9670;&#160;</a></span>eepreg_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eepreg_read </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>pos</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read position meta-data from EEPROM registry. </p>
<p>This is similar to eepreg_add, except it never writes meta-data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pos</td><td>pointer to position variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>name of entry to load</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-EIO on EEPROM I/O error </dd>
<dd>
-ENOENT on non-existent registry or entry </dd></dl>

</div>
</div>
<a id="ga824712fcd738078172386b1219fec5e7" name="ga824712fcd738078172386b1219fec5e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga824712fcd738078172386b1219fec5e7">&#9670;&#160;</a></span>eepreg_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eepreg_reset </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear existing meta-data registry. </p>
<p>This removes any existing meta-data registry by writing a new registry with no entries.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-EIO on EEPROM I/O error </dd></dl>

</div>
</div>
<a id="ga03a4041c60ceeae39c1a0c1920829625" name="ga03a4041c60ceeae39c1a0c1920829625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03a4041c60ceeae39c1a0c1920829625">&#9670;&#160;</a></span>eepreg_rm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eepreg_rm </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove entry from EEPROM registry and free space. </p>
<p>This removes an entry from the EEPROM registry and its corresponding data and moves the data and meta-data of entries after removed entry to occupy the freed space. This preserves the structure of the EEPROM registry. Warning: this is a read/write intensive operation! Mainly intended for use by migration utilities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>name of entry to remove</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-EIO on EEPROM I/O error </dd>
<dd>
-ENOENT on non-existent registry or entry </dd></dl>

</div>
</div>
<a id="gacdab9c188e7a2acab1e856bde50dada1" name="gacdab9c188e7a2acab1e856bde50dada1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacdab9c188e7a2acab1e856bde50dada1">&#9670;&#160;</a></span>eepreg_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eepreg_write </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>pos</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write meta-data to EEPROM registry. </p>
<p>This ignores existing meta-data and always makes a new entry in the registry. Typical use should be through eepreg_add and not eepreg_write. If multiple entries with the same name exist, eepreg functions will find the oldest. Mainly intended for use by migration utilities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pos</td><td>pointer to position variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>name of entry to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>requested amount of data storage</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-EIO on EEPROM I/O error </dd>
<dd>
-ENOSPC on insufficient EEPROM for entry </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->

    </div>
  </body>
</html>
