<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIOT OS: SRAM PUF</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="jquery.js"></script> -->
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<!-- <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> -->
<script src="/pagefind/pagefind-ui.js"></script>
<script>
  // Check whether the PagefindUI class is available
  if (typeof PagefindUI === 'undefined') {
    console.error('PagefindUI class is not available | Dev Build');
  } else {
    // // Remove the "searchstub" element and initialize the PagefindUI class
    // document.getElementById("#searchstub").remove();
    // Initialize the PagefindUI class with the element id "search"
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
  }
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="global.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <script>
    // Print the data within the NAVTREE variable from the navtreedata.js file
    var navtree = NAVTREE;
    console.log(navtree);
  </script>
<div class="flex flex-row gap-4 w-screen font-sans text-lg max-h-screen overscroll-contain justify-items-stretch bg-neutral-900">
  <!--Sidebar-->
  <div data-pagefind-ignore="all" class="w-1/3 max-w-md flex-auto h-screen bg-neutral-800 ring-2 ring-neutral-700 shadow-neutral-800 shadow-2xl rounded-xl p-3 ml-1 my-2 mr-3 flex flex-col justify-around">
    <div id="top" class="justify-self-center content-center items-center place-content-center">
      <img alt="Logo" src="riot-logo.svg"/>
      <div id="projectbrief">
        The friendly Operating System for the Internet of Things
      </div>
    </div>
    <div id="search" class="place-content-center" class="overflow-y-scroll max-h-64 bg-slate-400 ring-2 ring-white text-white" >
      <h1>Searchbar via Pagefind</h1>
      <!-- <div id="searchstub" class="flex items-center border border-gray-300 rounded-lg p-2 shadow-sm">
        <input type="text" placeholder="Search is only available in Production Build ..." class="flex-grow p-2 outline-none">
      </div> -->
    </div>
    <div id="navtree">
      <script>
        // The navtree variable is always a pair of two elements (key, value)
        // The key is the name we should display and the value is the link to the page
        // Generate the navtree from the navtreedata.js file and put it under the navtree div
        var navtree = NAVTREE[0][2];
        var navtreeHTML = "<h1>Navigation based on Doxygen</h1> <ul>";
        for (var i = 0; i < navtree.length; i++) {
          navtreeHTML += "<li><a href='" + navtree[i][1] + "'>" + navtree[i][0] + "</a></li>";
          if (i == 5) {
            navtreeHTML += '<li><h3 class="ring-2 ring-white"> Random Insert for Demonstration </h3></li>';
          }
        }
        navtreeHTML += "</ul>";
        document.getElementById("navtree").innerHTML = navtreeHTML;
      </script>
    </div>
    <ul>
      <li class="footer">
        Generated on Tue Sep 24 2024 11:16:27 by 
          <a href="http://www.doxygen.org/index.html">
            Doxygen
          </a> 
        1.12.0
      </li>
    </ul>
  </div>
  <!--Main Content-->
  <div class="hidden">
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__sys__puf__sram.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">SRAM PUF<div class="ingroups"><a class="el" href="group__sys.html">System</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>SRAM based physically unclonable function (PUF)  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>SRAM based physically unclonable function (PUF) </p>
<dl class="section warning"><dt>Warning</dt><dd><b class="text-danger">This feature is experimental!</b><br  />
 This API is experimental and in an early state - expect changes! </dd>
<dd>
The SRAM based seed mechanism it not cryptographically secure in its current state.</dd></dl>
<h1><a class="anchor" id="autotoc_md2095"></a>
About</h1>
<p>Transistor variations of SRAM memory cells lead to different states after device power-on. The startup state of multiple memory blocks form a device-unique pattern plus additional noise ("weak PUF"). The noise is used to generate random numbers for PRNG seeding.</p>
<h1><a class="anchor" id="autotoc_md2096"></a>
Preliminaries</h1>
<p>High entropy numbers can only be generated when the device starts from power-off (including low-power modes that turn of the RAM partly) and before the memory has been used. That's why the SRAM PUF procedure is implemented even before kernel initialization. Memory properties are hardware specific and can depend on environmental conditions. Thus, they should be evaluated for each individual deployment. A basic testing tool is provided in /RIOT/tests/sys/puf_sram.</p>
<h1><a class="anchor" id="autotoc_md2097"></a>
Soft-reset detection</h1>
<p>In order to detect a software reboot without preceding power-off phase, a soft-reset detection mechanism writes a marker memory <code>PUF_SRAM_MARKER</code> into SRAM. If the marker is still present after a restart, a soft-reset is expected and the PUF procedure is skipped.</p>
<h1><a class="anchor" id="autotoc_md2098"></a>
Random Seed Generation</h1>
<p>Uninitialized memory pattern are compressed by the lightweight DEK hash function to generate a high entropy 32-bit integer which can be used to seed a PRNG. This hash function is not cryptographically secure and as such, adversaries might be able to track parts of the initial SRAM response by analyzing PRNG sequences. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="puf__sram_8h.html">puf_sram.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gafb5e933abd06c58d08f3ea0b87c57598" id="r_gafb5e933abd06c58d08f3ea0b87c57598"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafb5e933abd06c58d08f3ea0b87c57598">SEED_RAM_LEN</a>&#160;&#160;&#160;(2048 / sizeof(uint32_t))</td></tr>
<tr class="memdesc:gafb5e933abd06c58d08f3ea0b87c57598"><td class="mdescLeft">&#160;</td><td class="mdescRight">SRAM length considered for seeding.  <br /></td></tr>
<tr class="separator:gafb5e933abd06c58d08f3ea0b87c57598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4abc08dea00c9816d023b6859286b6f" id="r_gab4abc08dea00c9816d023b6859286b6f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab4abc08dea00c9816d023b6859286b6f">PUF_SRAM_MARKER</a>&#160;&#160;&#160;(0xad3021ff)</td></tr>
<tr class="memdesc:gab4abc08dea00c9816d023b6859286b6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">SRAM marker to detect reboot without power-off.  <br /></td></tr>
<tr class="separator:gab4abc08dea00c9816d023b6859286b6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6b27ce5b23b67f52806c9197ef397306" id="r_ga6b27ce5b23b67f52806c9197ef397306"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6b27ce5b23b67f52806c9197ef397306">puf_sram_init</a> (const uint8_t *ram, size_t len)</td></tr>
<tr class="memdesc:ga6b27ce5b23b67f52806c9197ef397306"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks source of reboot by <code>puf_sram_softreset</code> and conditionally calls <code>puf_sram_generate</code>  <br /></td></tr>
<tr class="separator:ga6b27ce5b23b67f52806c9197ef397306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga760b51e9e3830d2f79ab2db24f8bb7f2" id="r_ga760b51e9e3830d2f79ab2db24f8bb7f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga760b51e9e3830d2f79ab2db24f8bb7f2">puf_sram_generate</a> (const uint8_t *ram, size_t len)</td></tr>
<tr class="memdesc:ga760b51e9e3830d2f79ab2db24f8bb7f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">builds hash from <code>SEED_RAM_LEN</code> bytes uninitialized SRAM, writes it to the global variable <code>puf_sram_seed</code> and returns the value  <br /></td></tr>
<tr class="separator:ga760b51e9e3830d2f79ab2db24f8bb7f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8184b5edf6d211e2124d8d1e2e0aafde" id="r_ga8184b5edf6d211e2124d8d1e2e0aafde"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8184b5edf6d211e2124d8d1e2e0aafde">puf_sram_softreset</a> (void)</td></tr>
<tr class="memdesc:ga8184b5edf6d211e2124d8d1e2e0aafde"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks for a memory marker to determine whether memory contains old data.  <br /></td></tr>
<tr class="separator:ga8184b5edf6d211e2124d8d1e2e0aafde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gac97f85cddd384419f703e5052478d03e" id="r_gac97f85cddd384419f703e5052478d03e"><td class="memItemLeft" align="right" valign="top"><a id="gac97f85cddd384419f703e5052478d03e" name="gac97f85cddd384419f703e5052478d03e"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>puf_sram_seed</b></td></tr>
<tr class="memdesc:gac97f85cddd384419f703e5052478d03e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global seed variable, allocated in puf_sram.c. <br /></td></tr>
<tr class="separator:gac97f85cddd384419f703e5052478d03e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga350061341d80d427e23a26f5e713a389" id="r_ga350061341d80d427e23a26f5e713a389"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga350061341d80d427e23a26f5e713a389">puf_sram_state</a></td></tr>
<tr class="memdesc:ga350061341d80d427e23a26f5e713a389"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global seed state, allocated in puf_sram.c 0 means seed was generated from SRAM pattern, 1 means missing power cycle detected, 2 means power cycle detected.  <br /></td></tr>
<tr class="separator:ga350061341d80d427e23a26f5e713a389"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81e7f9693ddd02cb8a5158dbae62a654" id="r_ga81e7f9693ddd02cb8a5158dbae62a654"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga81e7f9693ddd02cb8a5158dbae62a654">puf_sram_softreset_cnt</a></td></tr>
<tr class="memdesc:ga81e7f9693ddd02cb8a5158dbae62a654"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter variable allocated in puf_sram.c.  <br /></td></tr>
<tr class="separator:ga81e7f9693ddd02cb8a5158dbae62a654"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gab4abc08dea00c9816d023b6859286b6f" name="gab4abc08dea00c9816d023b6859286b6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4abc08dea00c9816d023b6859286b6f">&#9670;&#160;</a></span>PUF_SRAM_MARKER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PUF_SRAM_MARKER&#160;&#160;&#160;(0xad3021ff)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SRAM marker to detect reboot without power-off. </p>
<p>Source: <a href="https://www.random.org/bytes/">https://www.random.org/bytes/</a> </p>

<p class="definition">Definition at line <a class="el" href="puf__sram_8h_source.html#l00077">77</a> of file <a class="el" href="puf__sram_8h_source.html">puf_sram.h</a>.</p>

</div>
</div>
<a id="gafb5e933abd06c58d08f3ea0b87c57598" name="gafb5e933abd06c58d08f3ea0b87c57598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafb5e933abd06c58d08f3ea0b87c57598">&#9670;&#160;</a></span>SEED_RAM_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEED_RAM_LEN&#160;&#160;&#160;(2048 / sizeof(uint32_t))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SRAM length considered for seeding. </p>

<p class="definition">Definition at line <a class="el" href="puf__sram_8h_source.html#l00069">69</a> of file <a class="el" href="puf__sram_8h_source.html">puf_sram.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga760b51e9e3830d2f79ab2db24f8bb7f2" name="ga760b51e9e3830d2f79ab2db24f8bb7f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga760b51e9e3830d2f79ab2db24f8bb7f2">&#9670;&#160;</a></span>puf_sram_generate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void puf_sram_generate </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>ram</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>builds hash from <code>SEED_RAM_LEN</code> bytes uninitialized SRAM, writes it to the global variable <code>puf_sram_seed</code> and returns the value </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ram</td><td>pointer to SRAM memory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of the memory to consider </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6b27ce5b23b67f52806c9197ef397306" name="ga6b27ce5b23b67f52806c9197ef397306"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6b27ce5b23b67f52806c9197ef397306">&#9670;&#160;</a></span>puf_sram_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void puf_sram_init </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>ram</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checks source of reboot by <code>puf_sram_softreset</code> and conditionally calls <code>puf_sram_generate</code> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ram</td><td>pointer to SRAM memory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of the memory to consider </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8184b5edf6d211e2124d8d1e2e0aafde" name="ga8184b5edf6d211e2124d8d1e2e0aafde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8184b5edf6d211e2124d8d1e2e0aafde">&#9670;&#160;</a></span>puf_sram_softreset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool puf_sram_softreset </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checks for a memory marker to determine whether memory contains old data. </p>
<p>Otherwise it assumes a reboot from power down mode</p>
<dl class="section return"><dt>Returns</dt><dd>0 when reset with power cycle was detected </dd>
<dd>
1 when reset without power cycle was detected </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga81e7f9693ddd02cb8a5158dbae62a654" name="ga81e7f9693ddd02cb8a5158dbae62a654"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81e7f9693ddd02cb8a5158dbae62a654">&#9670;&#160;</a></span>puf_sram_softreset_cnt</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t puf_sram_softreset_cnt</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counter variable allocated in puf_sram.c. </p>
<p>It is incremented during each soft reset when no new PUF measurement was taken and it gets reset to zero after a power cycle was detected. </p>

</div>
</div>
<a id="ga350061341d80d427e23a26f5e713a389" name="ga350061341d80d427e23a26f5e713a389"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga350061341d80d427e23a26f5e713a389">&#9670;&#160;</a></span>puf_sram_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t puf_sram_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global seed state, allocated in puf_sram.c 0 means seed was generated from SRAM pattern, 1 means missing power cycle detected, 2 means power cycle detected. </p>
<p>The state will most likely be overwritten with 0 in the next steps </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->

    </div>
  </body>
</html>
